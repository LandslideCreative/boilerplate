/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

var tribe="object"==typeof tribe?tribe:{};tribe["custom-tables-v1"]=tribe["custom-tables-v1"]||{},tribe["custom-tables-v1"].ct1=function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],executeModules=data[2],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()();return deferredModules.push.apply(deferredModules,executeModules||[]),checkDeferredModules()}function checkDeferredModules(){for(var result,i=0;i<deferredModules.length;i++){for(var deferredModule=deferredModules[i],fulfilled=!0,j=1;j<deferredModule.length;j++){var depId=deferredModule[j];0!==installedChunks[depId]&&(fulfilled=!1)}fulfilled&&(deferredModules.splice(i--,1),result=__webpack_require__(__webpack_require__.s=deferredModule[0]))}return result}var installedModules={},installedChunks={0:0},deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="";var jsonpArray=window.webpackJsonp=window.webpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return deferredModules.push(["NFBX",1]),checkDeferredModules()}({"13aI":function(module,exports){module.exports=tribe["events-pro"].data.blocks.recurring.actions},"644Q":function(module,exports,__webpack_require__){},"6OzC":function(module,exports){module.exports=lodash.find},"6Ugf":function(module,exports){module.exports=tribe.common.elements},"8N8N":function(module,exports){module.exports=tribe["events-pro"].elements},"9lL/":function(module,exports){module.exports=tribe.common.data.plugins},B8vQ:function(module,exports){module.exports=tribe.common.utils},GE2E:function(module,exports){module.exports=tribe.common.icons},HJt2:function(module,exports){module.exports=tribe.events.data.blocks.datetime},Ixdi:function(module,exports,__webpack_require__){},JXX8:function(module,exports){module.exports=tribe["events-pro"].data.blocks.recurring},K2gz:function(module,exports){module.exports=tribe.modules.classnames},MWqi:function(module,exports){module.exports=tribe.modules.reselect},"MXy+":function(module,exports){module.exports=tribe.events.data.blocks.datetime.reducer},NFBX:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"blocks",(function(){return custom_tables_v1_blocks_namespaceObject})),__webpack_require__.d(__webpack_exports__,"data",(function(){return data_namespaceObject})),__webpack_require__.d(__webpack_exports__,"dialog",(function(){return custom_tables_v1_dialog_namespaceObject})),__webpack_require__.d(__webpack_exports__,"elements",(function(){return elements_namespaceObject})),__webpack_require__.d(__webpack_exports__,"plugins",(function(){return custom_tables_v1_plugins_namespaceObject})),__webpack_require__.d(__webpack_exports__,"occurrenceRedirect",(function(){return custom_tables_v1_occurrence_redirect_namespaceObject})),__webpack_require__.d(__webpack_exports__,"seriesMetabox",(function(){return custom_tables_v1_series_metabox_namespaceObject}));var constants_namespaceObject={};__webpack_require__.r(constants_namespaceObject),__webpack_require__.d(constants_namespaceObject,"TEC_EVENTS_PRO_PLUGIN",(function(){return TEC_EVENTS_PRO_PLUGIN}));var exception_types_namespaceObject={};__webpack_require__.r(exception_types_namespaceObject),__webpack_require__.d(exception_types_namespaceObject,"ADD_EXCEPTION_RULE",(function(){return ADD_EXCEPTION_RULE})),__webpack_require__.d(exception_types_namespaceObject,"REMOVE_EXCEPTION_RULE",(function(){return REMOVE_EXCEPTION_RULE})),__webpack_require__.d(exception_types_namespaceObject,"EDIT_EXCEPTION_RULE",(function(){return EDIT_EXCEPTION_RULE}));var exception_actions_namespaceObject={};__webpack_require__.r(exception_actions_namespaceObject),__webpack_require__.d(exception_actions_namespaceObject,"addExceptionRule",(function(){return addExceptionRule})),__webpack_require__.d(exception_actions_namespaceObject,"removeExceptionRule",(function(){return removeExceptionRule})),__webpack_require__.d(exception_actions_namespaceObject,"editExceptionRule",(function(){return editExceptionRule}));var shared_constants_namespaceObject={};__webpack_require__.r(shared_constants_namespaceObject),__webpack_require__.d(shared_constants_namespaceObject,"DAY_LABEL",(function(){return DAY_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"WEEK_LABEL",(function(){return WEEK_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"MONTH_LABEL",(function(){return MONTH_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"YEAR_LABEL",(function(){return YEAR_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"DAY_LABEL_PLURAL",(function(){return DAY_LABEL_PLURAL})),__webpack_require__.d(shared_constants_namespaceObject,"WEEK_LABEL_PLURAL",(function(){return WEEK_LABEL_PLURAL})),__webpack_require__.d(shared_constants_namespaceObject,"MONTH_LABEL_PLURAL",(function(){return MONTH_LABEL_PLURAL})),__webpack_require__.d(shared_constants_namespaceObject,"YEAR_LABEL_PLURAL",(function(){return YEAR_LABEL_PLURAL})),__webpack_require__.d(shared_constants_namespaceObject,"SINGLE_LABEL",(function(){return SINGLE_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"DAILY_LABEL",(function(){return DAILY_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"WEEKLY_LABEL",(function(){return WEEKLY_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"MONTHLY_LABEL",(function(){return MONTHLY_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"YEARLY_LABEL",(function(){return YEARLY_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"WEEKLY_CUSTOM_LABEL",(function(){return WEEKLY_CUSTOM_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"MONTHLY_CUSTOM_LABEL",(function(){return MONTHLY_CUSTOM_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"YEARLY_CUSTOM_LABEL",(function(){return YEARLY_CUSTOM_LABEL})),__webpack_require__.d(shared_constants_namespaceObject,"WEEKLY_CUSTOM_TYPE_ID",(function(){return WEEKLY_CUSTOM_TYPE_ID})),__webpack_require__.d(shared_constants_namespaceObject,"MONTHLY_CUSTOM_TYPE_ID",(function(){return MONTHLY_CUSTOM_TYPE_ID})),__webpack_require__.d(shared_constants_namespaceObject,"YEARLY_CUSTOM_TYPE_ID",(function(){return YEARLY_CUSTOM_TYPE_ID})),__webpack_require__.d(shared_constants_namespaceObject,"KEY_IS_OFF_START",(function(){return KEY_IS_OFF_START}));var options_namespaceObject={};__webpack_require__.r(options_namespaceObject),__webpack_require__.d(options_namespaceObject,"WEEKLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return WEEKLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION})),__webpack_require__.d(options_namespaceObject,"MONTHLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return MONTHLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION})),__webpack_require__.d(options_namespaceObject,"YEARLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION",(function(){return YEARLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION})),__webpack_require__.d(options_namespaceObject,"EXCEPTION_RULE_TYPES_OPTIONS",(function(){return EXCEPTION_RULE_TYPES_OPTIONS})),__webpack_require__.d(options_namespaceObject,"CUSTOM_EXCEPTION_RULE_TYPES_OPTIONS",(function(){return CUSTOM_EXCEPTION_RULE_TYPES_OPTIONS}));var exception_selectors_namespaceObject={};__webpack_require__.r(exception_selectors_namespaceObject),__webpack_require__.d(exception_selectors_namespaceObject,"getIndex",(function(){return getIndex})),__webpack_require__.d(exception_selectors_namespaceObject,"getAllExceptionRules",(function(){return getAllExceptionRules})),__webpack_require__.d(exception_selectors_namespaceObject,"getExceptionRule",(function(){return getExceptionRule})),__webpack_require__.d(exception_selectors_namespaceObject,"getExceptionRuleTypes",(function(){return getExceptionRuleTypes})),__webpack_require__.d(exception_selectors_namespaceObject,"getIsOffStart",(function(){return getIsOffStart})),__webpack_require__.d(exception_selectors_namespaceObject,"getOffStartIndex",(function(){return getOffStartIndex})),__webpack_require__.d(exception_selectors_namespaceObject,"getTypeId",(function(){return getTypeId})),__webpack_require__.d(exception_selectors_namespaceObject,"getTypeOption",(function(){return getTypeOption})),__webpack_require__.d(exception_selectors_namespaceObject,"isRuleTypeCustom",(function(){return isRuleTypeCustom}));var exception_namespaceObject={};__webpack_require__.r(exception_namespaceObject),__webpack_require__.d(exception_namespaceObject,"types",(function(){return exception_types_namespaceObject})),__webpack_require__.d(exception_namespaceObject,"actions",(function(){return exception_actions_namespaceObject})),__webpack_require__.d(exception_namespaceObject,"selectors",(function(){return exception_selectors_namespaceObject})),__webpack_require__.d(exception_namespaceObject,"options",(function(){return options_namespaceObject})),__webpack_require__.d(exception_namespaceObject,"sagas",(function(){return watchers})),__webpack_require__.d(exception_namespaceObject,"default",(function(){return exception_reducer})),__webpack_require__.d(exception_namespaceObject,"setInitialState",(function(){return reducer_setInitialState}));var recurring_types_namespaceObject={};__webpack_require__.r(recurring_types_namespaceObject),__webpack_require__.d(recurring_types_namespaceObject,"ADD_RECURRENCE_RULE",(function(){return ADD_RECURRENCE_RULE})),__webpack_require__.d(recurring_types_namespaceObject,"REMOVE_RECURRENCE_RULE",(function(){return REMOVE_RECURRENCE_RULE})),__webpack_require__.d(recurring_types_namespaceObject,"EDIT_RECURRENCE_RULE",(function(){return EDIT_RECURRENCE_RULE}));var recurring_actions_namespaceObject={};__webpack_require__.r(recurring_actions_namespaceObject),__webpack_require__.d(recurring_actions_namespaceObject,"addRecurrenceRule",(function(){return addRecurrenceRule})),__webpack_require__.d(recurring_actions_namespaceObject,"removeRecurrenceRule",(function(){return removeRecurrenceRule})),__webpack_require__.d(recurring_actions_namespaceObject,"editRecurrenceRule",(function(){return editRecurrenceRule}));var recurring_options_namespaceObject={};__webpack_require__.r(recurring_options_namespaceObject),__webpack_require__.d(recurring_options_namespaceObject,"WEEKLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return WEEKLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION})),__webpack_require__.d(recurring_options_namespaceObject,"MONTHLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return MONTHLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION})),__webpack_require__.d(recurring_options_namespaceObject,"YEARLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION",(function(){return YEARLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION})),__webpack_require__.d(recurring_options_namespaceObject,"RECURRENCE_RULE_TYPES_OPTIONS",(function(){return RECURRENCE_RULE_TYPES_OPTIONS})),__webpack_require__.d(recurring_options_namespaceObject,"CUSTOM_RECURRENCE_RULE_TYPES_OPTIONS",(function(){return CUSTOM_RECURRENCE_RULE_TYPES_OPTIONS}));var recurring_selectors_namespaceObject={};__webpack_require__.r(recurring_selectors_namespaceObject),__webpack_require__.d(recurring_selectors_namespaceObject,"getIndex",(function(){return selectors_getIndex})),__webpack_require__.d(recurring_selectors_namespaceObject,"getAllRecurrenceRules",(function(){return getAllRecurrenceRules})),__webpack_require__.d(recurring_selectors_namespaceObject,"getRecurrenceRule",(function(){return getRecurrenceRule})),__webpack_require__.d(recurring_selectors_namespaceObject,"getRecurrenceRuleTypes",(function(){return getRecurrenceRuleTypes})),__webpack_require__.d(recurring_selectors_namespaceObject,"getIsOffStart",(function(){return selectors_getIsOffStart})),__webpack_require__.d(recurring_selectors_namespaceObject,"getOffStartIndex",(function(){return selectors_getOffStartIndex})),__webpack_require__.d(recurring_selectors_namespaceObject,"getTypeId",(function(){return selectors_getTypeId})),__webpack_require__.d(recurring_selectors_namespaceObject,"getTypeOption",(function(){return selectors_getTypeOption})),__webpack_require__.d(recurring_selectors_namespaceObject,"isRuleTypeCustom",(function(){return selectors_isRuleTypeCustom}));var recurring_namespaceObject={};__webpack_require__.r(recurring_namespaceObject),__webpack_require__.d(recurring_namespaceObject,"types",(function(){return recurring_types_namespaceObject})),__webpack_require__.d(recurring_namespaceObject,"actions",(function(){return recurring_actions_namespaceObject})),__webpack_require__.d(recurring_namespaceObject,"selectors",(function(){return recurring_selectors_namespaceObject})),__webpack_require__.d(recurring_namespaceObject,"options",(function(){return recurring_options_namespaceObject})),__webpack_require__.d(recurring_namespaceObject,"sagas",(function(){return sagas_watchers})),__webpack_require__.d(recurring_namespaceObject,"default",(function(){return recurring_reducer})),__webpack_require__.d(recurring_namespaceObject,"setInitialState",(function(){return recurring_reducer_setInitialState}));var recurrence_selectors_namespaceObject={};__webpack_require__.r(recurrence_selectors_namespaceObject),__webpack_require__.d(recurrence_selectors_namespaceObject,"getTickets",(function(){return getTickets})),__webpack_require__.d(recurrence_selectors_namespaceObject,"isEventTicketsActive",(function(){return isEventTicketsActive})),__webpack_require__.d(recurrence_selectors_namespaceObject,"hasRSVP",(function(){return hasRSVP})),__webpack_require__.d(recurrence_selectors_namespaceObject,"hasTickets",(function(){return hasTickets}));var shared_selectors_namespaceObject={};__webpack_require__.r(shared_selectors_namespaceObject),__webpack_require__.d(shared_selectors_namespaceObject,"getShared",(function(){return getShared})),__webpack_require__.d(shared_selectors_namespaceObject,"getDayOfMonthOptions",(function(){return getDayOfMonthOptions}));var data_namespaceObject={};__webpack_require__.r(data_namespaceObject),__webpack_require__.d(data_namespaceObject,"initStore",(function(){return initStore})),__webpack_require__.d(data_namespaceObject,"getStore",(function(){return getStore}));var custom_tables_v1_blocks_namespaceObject={};__webpack_require__.r(custom_tables_v1_blocks_namespaceObject);var custom_tables_v1_dialog_namespaceObject={};__webpack_require__.r(custom_tables_v1_dialog_namespaceObject);var elements_namespaceObject={};__webpack_require__.r(elements_namespaceObject),__webpack_require__.d(elements_namespaceObject,"DayOfMonthPicker",(function(){return day_of_month_picker})),__webpack_require__.d(elements_namespaceObject,"EveryFrequency",(function(){return every_frequency})),__webpack_require__.d(elements_namespaceObject,"OnDayOfMonthPicker",(function(){return on_day_of_month_picker}));var custom_tables_v1_occurrence_redirect_namespaceObject={};__webpack_require__.r(custom_tables_v1_occurrence_redirect_namespaceObject);var custom_tables_v1_plugins_namespaceObject={};__webpack_require__.r(custom_tables_v1_plugins_namespaceObject);var custom_tables_v1_series_metabox_namespaceObject={};__webpack_require__.r(custom_tables_v1_series_metabox_namespaceObject);var external_tribe_common_utils_=__webpack_require__("B8vQ"),external_tribe_common_data_plugins_=__webpack_require__("9lL/"),external_tribe_common_store_=__webpack_require__("g8L8");const setPreviousStartDateTime=start=>({type:"@@MT/EVENTS_PRO/SET_PREVIOUS_START_DATE_TIME",payload:{start:start}});var external_tribe_modules_reselect_=__webpack_require__("MWqi");const TEC_EVENTS_PRO_PLUGIN="tec-events-pro",getPreviousStart=Object(external_tribe_modules_reselect_.createSelector)([state=>state[constants_namespaceObject.TEC_EVENTS_PRO_PLUGIN].blocks.datetime],(dateTime=>dateTime.previousStart));var defineProperty=__webpack_require__("lSNA"),defineProperty_default=__webpack_require__.n(defineProperty),external_tribe_common_utils_moment_=__webpack_require__("zCYh"),external_tribe_events_data_blocks_datetime_reducer_=__webpack_require__("MXy+");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const DEFAULT_STATE={previousStart:Object(external_tribe_common_utils_moment_.toDateTime)(external_tribe_events_data_blocks_datetime_reducer_.defaultStartMoment)},defaultStateToMetaMap={previousStart:"_EventStartDate"};const ADD_EXCEPTION_RULE="@@MT/EVENTS_PRO/ADD_EXCEPTION_RULE",REMOVE_EXCEPTION_RULE="@@MT/EVENTS_PRO/REMOVE_EXCEPTION_RULE",EDIT_EXCEPTION_RULE="@@MT/EVENTS_PRO/EDIT_EXCEPTION_RULE",addExceptionRule=payload=>({type:ADD_EXCEPTION_RULE,payload:payload}),removeExceptionRule=index=>({type:REMOVE_EXCEPTION_RULE,index:index}),editExceptionRule=(index,payload)=>({type:EDIT_EXCEPTION_RULE,index:index,payload:payload});var external_lodash_find_=__webpack_require__("6OzC"),external_lodash_find_default=__webpack_require__.n(external_lodash_find_),external_tribe_events_pro_data_blocks_exception_selectors_=__webpack_require__("UnPw"),external_tribe_events_pro_data_blocks_recurring_constants_=__webpack_require__("gGza");const{__:__}=wp.i18n,DAY_LABEL=__("day","tribe-events-calendar-pro"),WEEK_LABEL=__("week","tribe-events-calendar-pro"),MONTH_LABEL=__("month","tribe-events-calendar-pro"),YEAR_LABEL=__("year","tribe-events-calendar-pro"),DAY_LABEL_PLURAL=__("days","tribe-events-calendar-pro"),WEEK_LABEL_PLURAL=__("weeks","tribe-events-calendar-pro"),MONTH_LABEL_PLURAL=__("months","tribe-events-calendar-pro"),YEAR_LABEL_PLURAL=__("years","tribe-events-calendar-pro"),SINGLE_LABEL=__("once","tribe-events-calendar-pro"),DAILY_LABEL=__("daily","tribe-events-calendar-pro"),WEEKLY_LABEL=__("weekly","tribe-events-calendar-pro"),MONTHLY_LABEL=__("monthly","tribe-events-calendar-pro"),YEARLY_LABEL=__("yearly","tribe-events-calendar-pro"),WEEKLY_CUSTOM_LABEL=__("weekly (custom)","tribe-events-calendar-pro"),MONTHLY_CUSTOM_LABEL=__("monthly (custom)","tribe-events-calendar-pro"),YEARLY_CUSTOM_LABEL=__("yearly (custom)","tribe-events-calendar-pro"),WEEKLY_CUSTOM_TYPE_ID=`${external_tribe_events_pro_data_blocks_recurring_constants_.WEEKLY}-custom`,MONTHLY_CUSTOM_TYPE_ID=`${external_tribe_events_pro_data_blocks_recurring_constants_.MONTHLY}-custom`,YEARLY_CUSTOM_TYPE_ID=`${external_tribe_events_pro_data_blocks_recurring_constants_.YEARLY}-custom`,KEY_IS_OFF_START="isOffStart",WEEKLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION={label:WEEKLY_CUSTOM_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.WEEKLY,id:WEEKLY_CUSTOM_TYPE_ID},MONTHLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION={label:MONTHLY_CUSTOM_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.MONTHLY,id:MONTHLY_CUSTOM_TYPE_ID},YEARLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION={label:YEARLY_CUSTOM_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.YEARLY,id:YEARLY_CUSTOM_TYPE_ID},EXCEPTION_RULE_TYPES_OPTIONS=[{label:SINGLE_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE,id:external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE},{label:DAILY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.DAILY,id:external_tribe_events_pro_data_blocks_recurring_constants_.DAILY},{label:WEEKLY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.WEEKLY,id:external_tribe_events_pro_data_blocks_recurring_constants_.WEEKLY},{label:MONTHLY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.MONTHLY,id:external_tribe_events_pro_data_blocks_recurring_constants_.MONTHLY},{label:YEARLY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.YEARLY,id:external_tribe_events_pro_data_blocks_recurring_constants_.YEARLY}],CUSTOM_EXCEPTION_RULE_TYPES_OPTIONS=[WEEKLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION,MONTHLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION,YEARLY_CUSTOM_EXCEPTION_RULE_TYPES_OPTION],getIndex=(_,props)=>props.index,getAllExceptionRules=state=>state[constants_namespaceObject.TEC_EVENTS_PRO_PLUGIN].blocks.exception,getExceptionRule=Object(external_tribe_modules_reselect_.createSelector)([getAllExceptionRules,getIndex],((allExceptions,index)=>allExceptions[index])),getExceptionRuleTypes=Object(external_tribe_modules_reselect_.createSelector)([getExceptionRule],(rule=>rule.ruleTypes||EXCEPTION_RULE_TYPES_OPTIONS)),getIsOffStart=Object(external_tribe_modules_reselect_.createSelector)([getExceptionRule],(rule=>rule.isOffStart)),getOffStartIndex=Object(external_tribe_modules_reselect_.createSelector)([getExceptionRule],(rule=>rule.offStartIndex)),getTypeId=Object(external_tribe_modules_reselect_.createSelector)([getExceptionRule],(rule=>rule.typeId)),getTypeOption=Object(external_tribe_modules_reselect_.createSelector)([external_tribe_events_pro_data_blocks_exception_selectors_.getType,getTypeId],((type,typeId)=>{const options=[...EXCEPTION_RULE_TYPES_OPTIONS];return external_lodash_find_default()(options,(option=>{const optionValueMatches=option.value===type;return typeId?optionValueMatches&&option.id===typeId:optionValueMatches}))})),isRuleTypeCustom=Object(external_tribe_modules_reselect_.createSelector)([getTypeId],(typeId=>!!typeId&&typeId.includes("custom")));var external_tribe_modules_reduxSaga_effects_=__webpack_require__("RmXt"),external_tribe_events_pro_data_blocks_exception_types_=__webpack_require__("OuoG");function*sagas_addExceptionRule(){const nonSingleExceptions=(yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_pro_data_blocks_exception_selectors_.getExceptions)).filter((exception=>exception.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)),payload={isOffStart:!1,offStartIndex:-1,typeId:external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE};if(nonSingleExceptions.length){const allowedExceptions=EXCEPTION_RULE_TYPES_OPTIONS.filter((exception=>exception.value===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE));payload.ruleTypes=allowedExceptions}else payload.ruleTypes=EXCEPTION_RULE_TYPES_OPTIONS;yield Object(external_tribe_modules_reduxSaga_effects_.put)(addExceptionRule(payload))}function*unlockExceptionRule(action){yield Object(external_tribe_modules_reduxSaga_effects_.put)(removeExceptionRule(action.index));const exceptions=yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_pro_data_blocks_exception_selectors_.getExceptions);exceptions.filter((exception=>exception.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)).length||(yield Object(external_tribe_modules_reduxSaga_effects_.all)(exceptions.map(((exception,index)=>Object(external_tribe_modules_reduxSaga_effects_.put)(editExceptionRule(index,{ruleTypes:EXCEPTION_RULE_TYPES_OPTIONS}))))))}function*sagas_editExceptionRule(){const exceptions=yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_pro_data_blocks_exception_selectors_.getExceptions);if(exceptions.filter((exception=>exception.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)).length){const allowedExceptions=EXCEPTION_RULE_TYPES_OPTIONS.filter((exception=>exception.value===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE));yield Object(external_tribe_modules_reduxSaga_effects_.all)(exceptions.map(((exception,index)=>{if(exception.type===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)return Object(external_tribe_modules_reduxSaga_effects_.put)(editExceptionRule(index,{ruleTypes:allowedExceptions}))})))}else yield Object(external_tribe_modules_reduxSaga_effects_.all)(exceptions.map(((exception,index)=>Object(external_tribe_modules_reduxSaga_effects_.put)(editExceptionRule(index,{ruleTypes:EXCEPTION_RULE_TYPES_OPTIONS})))))}function*watchers(){yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_exception_types_.ADD_EXCEPTION_FIELD],sagas_addExceptionRule),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_exception_types_.REMOVE_EXCEPTION],unlockExceptionRule),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_exception_types_.EDIT_EXCEPTION],sagas_editExceptionRule)}const reducer_DEFAULT_STATE=[],reducer_setInitialState=data=>{if(data.meta._tribe_blocks_recurrence_exclusions)try{const rules=JSON.parse(data.meta._tribe_blocks_recurrence_exclusions),nonSingleRules=rules.filter((rule=>rule.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)),allowedRules=EXCEPTION_RULE_TYPES_OPTIONS.filter((rule=>rule.value===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE));rules.forEach(((rule,index)=>{const payload={isOffStart:!1,offStartIndex:-1,typeId:rule.type};nonSingleRules.length&&rule.type===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE?payload.ruleTypes=allowedRules:payload.ruleTypes=EXCEPTION_RULE_TYPES_OPTIONS,reducer_DEFAULT_STATE.push(payload)}))}catch(e){console.error(e)}};var exception_reducer=(state=reducer_DEFAULT_STATE,action)=>{switch(action.type){case ADD_EXCEPTION_RULE:return[...state,action.payload];case REMOVE_EXCEPTION_RULE:return state.filter(((rule,index)=>index!==action.index));case EDIT_EXCEPTION_RULE:return((state,action)=>{const field=Object.assign({},state[action.index],action.payload);return 1===state.length?[field]:[...state.slice(0,action.index),field,...state.slice(action.index+1)]})(state,action);default:return state}};const ADD_RECURRENCE_RULE="@@MT/EVENTS_PRO/ADD_RECURRENCE_RULE",REMOVE_RECURRENCE_RULE="@@MT/EVENTS_PRO/REMOVE_RECURRENCE_RULE",EDIT_RECURRENCE_RULE="@@MT/EVENTS_PRO/EDIT_RECURRENCE_RULE",addRecurrenceRule=payload=>({type:ADD_RECURRENCE_RULE,payload:payload}),removeRecurrenceRule=index=>({type:REMOVE_RECURRENCE_RULE,index:index}),editRecurrenceRule=(index,payload)=>({type:EDIT_RECURRENCE_RULE,index:index,payload:payload});var external_tribe_events_pro_data_blocks_recurring_selectors_=__webpack_require__("iy/v");const WEEKLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION={label:WEEKLY_CUSTOM_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.WEEKLY,id:WEEKLY_CUSTOM_TYPE_ID},MONTHLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION={label:MONTHLY_CUSTOM_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.MONTHLY,id:MONTHLY_CUSTOM_TYPE_ID},YEARLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION={label:YEARLY_CUSTOM_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.YEARLY,id:YEARLY_CUSTOM_TYPE_ID},RECURRENCE_RULE_TYPES_OPTIONS=[{label:SINGLE_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE,id:external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE},{label:DAILY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.DAILY,id:external_tribe_events_pro_data_blocks_recurring_constants_.DAILY},{label:WEEKLY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.WEEKLY,id:external_tribe_events_pro_data_blocks_recurring_constants_.WEEKLY},{label:MONTHLY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.MONTHLY,id:external_tribe_events_pro_data_blocks_recurring_constants_.MONTHLY},{label:YEARLY_LABEL,value:external_tribe_events_pro_data_blocks_recurring_constants_.YEARLY,id:external_tribe_events_pro_data_blocks_recurring_constants_.YEARLY}],CUSTOM_RECURRENCE_RULE_TYPES_OPTIONS=[WEEKLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION,MONTHLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION,YEARLY_CUSTOM_RECURRENCE_RULE_TYPES_OPTION],selectors_getIndex=(_,props)=>props.index,getAllRecurrenceRules=state=>state[constants_namespaceObject.TEC_EVENTS_PRO_PLUGIN].blocks.recurring,getRecurrenceRule=Object(external_tribe_modules_reselect_.createSelector)([getAllRecurrenceRules,selectors_getIndex],((allRecurrence,index)=>allRecurrence[index])),getRecurrenceRuleTypes=Object(external_tribe_modules_reselect_.createSelector)([getRecurrenceRule],(rule=>rule.ruleTypes||RECURRENCE_RULE_TYPES_OPTIONS)),selectors_getIsOffStart=Object(external_tribe_modules_reselect_.createSelector)([getRecurrenceRule],(rule=>rule.isOffStart)),selectors_getOffStartIndex=Object(external_tribe_modules_reselect_.createSelector)([getRecurrenceRule],(rule=>rule.offStartIndex)),selectors_getTypeId=Object(external_tribe_modules_reselect_.createSelector)([getRecurrenceRule],(rule=>rule.typeId)),selectors_getTypeOption=Object(external_tribe_modules_reselect_.createSelector)([external_tribe_events_pro_data_blocks_recurring_selectors_.getType,selectors_getTypeId],((type,typeId)=>{let options=[...RECURRENCE_RULE_TYPES_OPTIONS];return typeId&&(options=[...options,...CUSTOM_RECURRENCE_RULE_TYPES_OPTIONS]),external_lodash_find_default()(options,(option=>{const optionValueMatches=option.value===type;return typeId?optionValueMatches&&option.id===typeId:optionValueMatches}))})),selectors_isRuleTypeCustom=Object(external_tribe_modules_reselect_.createSelector)([selectors_getTypeId],(typeId=>!!typeId&&typeId.includes("custom")));var external_tribe_common_utils_date_=__webpack_require__("tbMi"),external_tribe_events_pro_data_blocks_constants_=__webpack_require__("gSph"),external_tribe_events_pro_data_blocks_recurring_types_=__webpack_require__("pVH8"),external_tribe_events_pro_data_blocks_recurring_actions_=__webpack_require__("13aI");function*sagas_addRecurrenceRule(){const nonSingleRules=(yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_pro_data_blocks_recurring_selectors_.getRules)).filter((rule=>rule.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)),payload={isOffStart:!1,offStartIndex:-1,typeId:external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE};if(nonSingleRules.length){const allowedRules=RECURRENCE_RULE_TYPES_OPTIONS.filter((rule=>rule.value===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE));payload.ruleTypes=allowedRules}else payload.ruleTypes=RECURRENCE_RULE_TYPES_OPTIONS;yield Object(external_tribe_modules_reduxSaga_effects_.put)(addRecurrenceRule(payload))}function*sagas_removeRecurrenceRule(action){yield Object(external_tribe_modules_reduxSaga_effects_.put)(removeRecurrenceRule(action.index));const rules=yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_pro_data_blocks_recurring_selectors_.getRules);rules.filter((rule=>rule.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)).length||(yield Object(external_tribe_modules_reduxSaga_effects_.all)(rules.map(((rule,index)=>Object(external_tribe_modules_reduxSaga_effects_.put)(editRecurrenceRule(index,{ruleTypes:RECURRENCE_RULE_TYPES_OPTIONS}))))))}function*sagas_editRecurrenceRule(action){if(action.sync)return;const rules=yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_pro_data_blocks_recurring_selectors_.getRules);if(rules.filter((rule=>rule.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)).length){const allowedRules=RECURRENCE_RULE_TYPES_OPTIONS.filter((rule=>rule.value===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE));yield Object(external_tribe_modules_reduxSaga_effects_.all)(rules.map(((rule,index)=>{if(rule.type===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)return Object(external_tribe_modules_reduxSaga_effects_.put)(editRecurrenceRule(index,{ruleTypes:allowedRules}))})))}else yield Object(external_tribe_modules_reduxSaga_effects_.all)(rules.map(((rule,index)=>Object(external_tribe_modules_reduxSaga_effects_.put)(editRecurrenceRule(index,{ruleTypes:RECURRENCE_RULE_TYPES_OPTIONS})))))}function*editRecurrenceRuleDefaults(){const index=(yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_pro_data_blocks_recurring_selectors_.getRulesCount))-1,todayMoment=yield Object(external_tribe_modules_reduxSaga_effects_.call)(external_tribe_common_utils_moment_.toMoment,external_tribe_common_utils_date_.TODAY),limitDateMoment=yield Object(external_tribe_modules_reduxSaga_effects_.call)([todayMoment,"add"],1,"year"),limitDateInput=yield Object(external_tribe_modules_reduxSaga_effects_.call)(external_tribe_common_utils_moment_.toDate,limitDateMoment),limitDateObj=new Date(limitDateInput);yield Object(external_tribe_modules_reduxSaga_effects_.put)(external_tribe_events_pro_data_blocks_recurring_actions_.syncRule(index,{[external_tribe_events_pro_data_blocks_constants_.KEY_LIMIT_DATE_INPUT]:limitDateInput,[external_tribe_events_pro_data_blocks_constants_.KEY_LIMIT_DATE_OBJ]:limitDateObj}))}function*sagas_watchers(){yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_recurring_types_.ADD_RULE_FIELD],sagas_addRecurrenceRule),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_recurring_types_.REMOVE_RULE],sagas_removeRecurrenceRule),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_recurring_types_.EDIT_RULE],sagas_editRecurrenceRule),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_recurring_types_.ADD_RULE],editRecurrenceRuleDefaults)}const recurring_reducer_DEFAULT_STATE=[],recurring_reducer_setInitialState=data=>{if(data.meta._tribe_blocks_recurrence_rules)try{const rules=JSON.parse(data.meta._tribe_blocks_recurrence_rules),nonSingleRules=rules.filter((rule=>rule.type!==external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE)),allowedRuleTypes=RECURRENCE_RULE_TYPES_OPTIONS.filter((rule=>rule.value===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE));rules.forEach(((rule,index)=>{const payload={isOffStart:!!rule[KEY_IS_OFF_START],offStartIndex:-1,typeId:rule.type};if(rule[KEY_IS_OFF_START]){const offStartRuleTypes=[...RECURRENCE_RULE_TYPES_OPTIONS,recurring_options_namespaceObject[`${rule.type.toUpperCase()}_CUSTOM_RECURRENCE_RULE_TYPES_OPTION`]];payload.offStartIndex=index,payload.typeId=shared_constants_namespaceObject[`${rule.type.toUpperCase()}_CUSTOM_TYPE_ID`],payload.ruleTypes=offStartRuleTypes}else nonSingleRules.length&&rule.type===external_tribe_events_pro_data_blocks_recurring_constants_.SINGLE?payload.ruleTypes=allowedRuleTypes:payload.ruleTypes=RECURRENCE_RULE_TYPES_OPTIONS;recurring_reducer_DEFAULT_STATE.push(payload)}))}catch(e){console.error(e)}};var recurring_reducer=(state=recurring_reducer_DEFAULT_STATE,action)=>{switch(action.type){case ADD_RECURRENCE_RULE:return[...state,action.payload];case REMOVE_RECURRENCE_RULE:return state.filter(((rules,index)=>index!==action.index));case EDIT_RECURRENCE_RULE:return((state,action)=>{const field=Object.assign({},state[action.index],action.payload);return 1===state.length?[field]:[...state.slice(0,action.index),field,...state.slice(action.index+1)]})(state,action);default:return state}};const getTickets=state=>state.tickets,isEventTicketsActive=Object(external_tribe_modules_reselect_.createSelector)([getTickets],(tickets=>!!tickets)),hasRSVP=Object(external_tribe_modules_reselect_.createSelector)([getTickets],(tickets=>!!tickets&&!!tickets.blocks.rsvp.id)),hasTickets=Object(external_tribe_modules_reselect_.createSelector)([getTickets],(tickets=>!!tickets&&!!tickets.blocks.ticket.tickets.allClientIds.length));var external_tribe_modules_redux_=__webpack_require__("rKB8");const blocks_reducer_setInitialState=data=>{(data=>{const{meta:meta}=data;Object.keys(defaultStateToMetaMap).forEach((key=>{const metaKey=defaultStateToMetaMap[key];meta.hasOwnProperty(metaKey)&&(DEFAULT_STATE[key]=meta[metaKey])}))})(data),recurring_reducer_setInitialState(data),reducer_setInitialState(data)};var blocks_reducer=Object(external_tribe_modules_redux_.combineReducers)({datetime:(state=DEFAULT_STATE,action)=>"@@MT/EVENTS_PRO/SET_PREVIOUS_START_DATE_TIME"===action.type?_objectSpread(_objectSpread({},state),{},{previousStart:action.payload.start}):state,exception:exception_reducer,recurring:recurring_reducer});const getShared=state=>state[constants_namespaceObject.TEC_EVENTS_PRO_PLUGIN].shared,getDayOfMonthOptions=Object(external_tribe_modules_reselect_.createSelector)([getShared],(shared=>shared.dayOfMonthOptions));var external_tribe_common_utils_globals_=__webpack_require__("kczL"),external_tribe_events_data_blocks_datetime_types_=__webpack_require__("Yht6"),external_tribe_events_data_blocks_datetime_selectors_=__webpack_require__("SOG1"),external_tribe_events_pro_data_blocks_exception_actions_=__webpack_require__("tPgE"),external_tribe_events_pro_data_status_sagas_=__webpack_require__("OluY");const cardinalToOrdinalMap={1:external_tribe_events_pro_data_blocks_recurring_constants_.FIRST,2:external_tribe_events_pro_data_blocks_recurring_constants_.SECOND,3:external_tribe_events_pro_data_blocks_recurring_constants_.THIRD,4:external_tribe_events_pro_data_blocks_recurring_constants_.FOURTH,5:external_tribe_events_pro_data_blocks_recurring_constants_.FIFTH},isoWeekdayToDayNameMap={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"},getWeekdayName=dateMoment=>{const weekday=dateMoment.isoWeekday();return isoWeekdayToDayNameMap[weekday]},getWeekdayOrdinalValue=dateMoment=>{const date=dateMoment.date(),cardinalWeek=Math.floor((date-1)/7)+1;return cardinalToOrdinalMap[cardinalWeek]},isWeekdayLastOfMonth=dateMoment=>dateMoment.daysInMonth()-dateMoment.date()<7,isDateLastOfMonth=dateMoment=>dateMoment.daysInMonth()===dateMoment.date(),utils_getDayOfMonthOptions=dateMoment=>{const options=[],recurrenceStrings=Object(external_tribe_common_utils_globals_.get)("tribe_events_pro_recurrence_strings"),ordinal=getWeekdayOrdinalValue(dateMoment),weekdayName=getWeekdayName(dateMoment),patternKey=ordinal+weekdayName,patternObj=recurrenceStrings.customTablesV1.dayOfMonth.pattern[patternKey];if(options.push({label:patternObj.label,value:patternObj.ordinal.toLowerCase()+"-"+patternObj.day}),isWeekdayLastOfMonth(dateMoment)){const lastWeekdayPatternKey="last"+weekdayName,lastWeekdayPatternObj=recurrenceStrings.customTablesV1.dayOfMonth.pattern[lastWeekdayPatternKey];options.push({label:lastWeekdayPatternObj.label,value:lastWeekdayPatternObj.ordinal.toLowerCase()+"-"+lastWeekdayPatternObj.day})}if(isDateLastOfMonth(dateMoment)){const lastDayPatternKey="lastDay",lastDayPatternObj=recurrenceStrings.customTablesV1.dayOfMonth.pattern[lastDayPatternKey];options.push({label:lastDayPatternObj.label,value:lastDayPatternObj.ordinal.toLowerCase()+"-"+lastDayPatternObj.day})}const date=dateMoment.date(),label=recurrenceStrings.customTablesV1.dayOfMonth.date[date];return options.push({label:label,value:String(date)}),options},mapOptionValueToState=optionValue=>{const valuesArr=optionValue.split("-");if(1===valuesArr.length)return{[external_tribe_events_pro_data_blocks_constants_.KEY_WEEK]:null,[external_tribe_events_pro_data_blocks_constants_.KEY_DAY]:Number(valuesArr[0])};if(2===valuesArr.length){const ordinal=valuesArr[0],weekday=Number(valuesArr[1]);return{[external_tribe_events_pro_data_blocks_constants_.KEY_WEEK]:ordinal,[external_tribe_events_pro_data_blocks_constants_.KEY_DAY]:weekday}}return{}},{SINGLE:SINGLE,DAILY:DAILY,WEEKLY:WEEKLY,MONTHLY:MONTHLY,YEARLY:YEARLY,LAST:LAST}=external_tribe_events_pro_data_blocks_recurring_constants_;function*isRuleDayOfMonthMatchDate({selectors:selectors},index,dateMoment){const week=yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.getWeek,{index:index}),day=yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.getDay,{index:index});if(!week&&day){return day===(yield Object(external_tribe_modules_reduxSaga_effects_.call)([dateMoment,"date"]))}if(week){const weekday=yield Object(external_tribe_modules_reduxSaga_effects_.call)([dateMoment,"isoWeekday"]),ordinal=yield Object(external_tribe_modules_reduxSaga_effects_.call)(getWeekdayOrdinalValue,dateMoment),isLastWeekday=yield Object(external_tribe_modules_reduxSaga_effects_.call)(isWeekdayLastOfMonth,dateMoment),isLastDay=yield Object(external_tribe_modules_reduxSaga_effects_.call)(isDateLastOfMonth,dateMoment);return(week===ordinal||(isLastWeekday||isLastDay)&&week===LAST)&&(day===weekday||8===day&&isLastDay)}return!1}function*getOptionIndex({selectors:selectors},index,options){const prevOptionType=((week,day)=>{const dayInt=parseInt(day);return week?8===dayInt?"last-day-in-month":"last"===week?"last-day-of-week-in-month":"day-of-week-in-month":day?"day-n":null})(yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.getWeek,{index:index}),yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.getDay,{index:index})),found=options.map((option=>{return(value=option.value)?"last-8"===value?"last-day-in-month":value.match(/(first|second|third|fourth|fifth)-\d/)?"day-of-week-in-month":value.match(/last-\d/)?"last-day-of-week-in-month":"day-n":null;var value})).indexOf(prevOptionType);return found>=0?found:0}function*syncDayOfMonthDropdownOptions(handlers,index,meta){const options=yield Object(external_tribe_modules_reduxSaga_effects_.call)(utils_getDayOfMonthOptions,meta.startMoment),optionIndex=yield Object(external_tribe_modules_reduxSaga_effects_.call)(getOptionIndex,handlers,index,options),ruleUpdates=yield Object(external_tribe_modules_reduxSaga_effects_.call)(mapOptionValueToState,options[optionIndex].value);yield Object(external_tribe_modules_reduxSaga_effects_.put)(handlers.actions.sync(index,ruleUpdates))}function*syncDayOfMonthDropdown(handlers,index,meta){if(tecEventDetails.isRdate)return;const{startMoment:startMoment,prevStartMoment:prevStartMoment}=meta,isSameDay=yield Object(external_tribe_modules_reduxSaga_effects_.call)([startMoment,"isSame"],prevStartMoment,"day"),ruleDayOfMonthMatchesEventStart=yield Object(external_tribe_modules_reduxSaga_effects_.call)(isRuleDayOfMonthMatchDate,handlers,index,startMoment);isSameDay&&ruleDayOfMonthMatchesEventStart||(yield Object(external_tribe_modules_reduxSaga_effects_.call)(syncDayOfMonthDropdownOptions,handlers,index,meta))}function*updateWeeklyRuleLockedOption({actions:actions,selectors:selectors},index,{startMoment:startMoment,prevStartMoment:prevStartMoment}){const lockedWeekday=yield Object(external_tribe_modules_reduxSaga_effects_.call)([startMoment,"isoWeekday"]),prevLockedWeekday=yield Object(external_tribe_modules_reduxSaga_effects_.call)([prevStartMoment,"isoWeekday"]),ruleDays=yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.getDays,{index:index});if(tecEventDetails.isRdate)return;if(lockedWeekday===prevLockedWeekday&&ruleDays.includes(lockedWeekday))return;const newRuleDays=ruleDays.filter((day=>day!==prevLockedWeekday));newRuleDays.includes(lockedWeekday)||(newRuleDays.push(lockedWeekday),newRuleDays.sort(((a,b)=>a-b))),yield Object(external_tribe_modules_reduxSaga_effects_.put)(actions.sync(index,{[external_tribe_events_pro_data_blocks_constants_.KEY_DAYS]:newRuleDays}))}function*updateYearlyRuleLockedOption({actions:actions,selectors:selectors},index,{startMoment:startMoment,prevStartMoment:prevStartMoment}){const lockedMonth=(yield Object(external_tribe_modules_reduxSaga_effects_.call)([startMoment,"month"]))+1,prevLockedMonth=(yield Object(external_tribe_modules_reduxSaga_effects_.call)([prevStartMoment,"month"]))+1,ruleMonths=yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.getMonth,{index:index});if(tecEventDetails.isRdate)return;if(lockedMonth===prevLockedMonth&&ruleMonths.includes(lockedMonth))return;const newRuleMonths=ruleMonths.filter((month=>month!==prevLockedMonth));newRuleMonths.includes(lockedMonth)||(newRuleMonths.push(lockedMonth),newRuleMonths.sort(((a,b)=>a-b))),yield Object(external_tribe_modules_reduxSaga_effects_.put)(actions.sync(index,{[external_tribe_events_pro_data_blocks_constants_.KEY_MONTH]:newRuleMonths}))}function*updateRuleLockedOption(action){const selectors=recurring_selectors_namespaceObject,proSelectors=external_tribe_events_pro_data_blocks_recurring_selectors_,actions={sync:external_tribe_events_pro_data_blocks_recurring_actions_.syncRule},getCount=external_tribe_events_pro_data_blocks_recurring_selectors_.getRulesCount,startDateTime=yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_data_blocks_datetime_selectors_.getStart),startMoment=yield Object(external_tribe_modules_reduxSaga_effects_.call)(external_tribe_common_utils_moment_.toMoment,startDateTime),prevStartDateTime=yield Object(external_tribe_modules_reduxSaga_effects_.select)(getPreviousStart),prevStartMoment=yield Object(external_tribe_modules_reduxSaga_effects_.call)(external_tribe_common_utils_moment_.toMoment,prevStartDateTime),rulesCount=yield Object(external_tribe_modules_reduxSaga_effects_.select)(getCount),meta={startMoment:startMoment,prevStartMoment:prevStartMoment};let ruleType,isCustom,isSingleOrDaily,index=0;const options=yield Object(external_tribe_modules_reduxSaga_effects_.call)(utils_getDayOfMonthOptions,startMoment);for(yield Object(external_tribe_modules_reduxSaga_effects_.put)((({options:options})=>({type:"@@MT/EVENTS_PRO/SET_DAY_OF_MONTH_OPTIONS",payload:{options:options}}))({options:options}));index<rulesCount;)if(ruleType=yield Object(external_tribe_modules_reduxSaga_effects_.select)(proSelectors.getType,{index:index}),isCustom=yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.isRuleTypeCustom,{index:index}),isSingleOrDaily=yield Object(external_tribe_modules_reduxSaga_effects_.call)([[SINGLE,DAILY],"includes"],ruleType),isSingleOrDaily||isCustom)index++;else{switch(ruleType){case WEEKLY:yield Object(external_tribe_modules_reduxSaga_effects_.call)(updateWeeklyRuleLockedOption,{actions:actions,selectors:proSelectors},index,meta);break;case MONTHLY:yield Object(external_tribe_modules_reduxSaga_effects_.call)(syncDayOfMonthDropdown,{actions:actions,selectors:proSelectors},index,meta);break;case YEARLY:yield Object(external_tribe_modules_reduxSaga_effects_.call)(updateYearlyRuleLockedOption,{actions:actions,selectors:proSelectors},index,meta),yield Object(external_tribe_modules_reduxSaga_effects_.call)(syncDayOfMonthDropdown,{actions:actions,selectors:proSelectors},index,meta)}index++}}function*updateRecurrencePanelExpand(type){const isRecurring=type===external_tribe_events_pro_data_blocks_constants_.RECURRING,selectors=isRecurring?recurring_selectors_namespaceObject:exception_selectors_namespaceObject,proSelectors=isRecurring?external_tribe_events_pro_data_blocks_recurring_selectors_:external_tribe_events_pro_data_blocks_exception_selectors_,rulesCount=yield Object(external_tribe_modules_reduxSaga_effects_.select)(isRecurring?external_tribe_events_pro_data_blocks_recurring_selectors_.getRulesCount:external_tribe_events_pro_data_blocks_exception_selectors_.getExceptionsCount);let ruleType,isCustom,isWeeklyMonthlyOrYearly,recurringPanelHeader,recurringPanelToggle,index=0;for(;index<rulesCount;){if(ruleType=yield Object(external_tribe_modules_reduxSaga_effects_.select)(proSelectors.getType,{index:index}),isCustom=yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.isRuleTypeCustom,{index:index}),isWeeklyMonthlyOrYearly=yield Object(external_tribe_modules_reduxSaga_effects_.call)([[WEEKLY,MONTHLY,YEARLY],"includes"],ruleType),isWeeklyMonthlyOrYearly&&!isCustom){recurringPanelHeader=yield Object(external_tribe_modules_reduxSaga_effects_.call)([document,"querySelector"],`.tribe-editor__events-pro__panel-header--${type}`),recurringPanelHeader&&!recurringPanelHeader.classList.contains("tribe-editor__events-pro__panel-header--expanded")&&(recurringPanelToggle=yield Object(external_tribe_modules_reduxSaga_effects_.call)([recurringPanelHeader,"querySelector"],"button"),recurringPanelToggle.click());break}index++}}function*updateRulesOnStartTimeChange(){yield Object(external_tribe_modules_reduxSaga_effects_.call)(updateRuleLockedOption,{type:external_tribe_events_pro_data_blocks_recurring_types_.EDIT_RULE}),yield Object(external_tribe_modules_reduxSaga_effects_.call)(updateRecurrencePanelExpand,external_tribe_events_pro_data_blocks_constants_.RECURRING),yield Object(external_tribe_modules_reduxSaga_effects_.call)(updateRecurrencePanelExpand,external_tribe_events_pro_data_blocks_constants_.EXCEPTION);const startDateTime=yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_data_blocks_datetime_selectors_.getStart);yield Object(external_tribe_modules_reduxSaga_effects_.put)(setPreviousStartDateTime(startDateTime))}function*updateRulesOnEdit(action){if(action.sync)return;yield Object(external_tribe_modules_reduxSaga_effects_.call)(updateRuleLockedOption,action);const startDateTime=yield Object(external_tribe_modules_reduxSaga_effects_.select)(external_tribe_events_data_blocks_datetime_selectors_.getStart);yield Object(external_tribe_modules_reduxSaga_effects_.put)(setPreviousStartDateTime(startDateTime))}function*updateCustomRule(action){if(action.sync)return;if(!action.payload.hasOwnProperty("typeId")||!action.payload.typeId.includes("custom"))return;const isRecurring=action.type===EDIT_RECURRENCE_RULE,selectors=isRecurring?recurring_selectors_namespaceObject:exception_selectors_namespaceObject,offStartIndex=yield Object(external_tribe_modules_reduxSaga_effects_.select)(selectors.getOffStartIndex,{index:action.index});if(-1===offStartIndex)return;const offStartRule=isRecurring?Object(external_tribe_common_utils_globals_.postObjects)().tribe_events.meta._tribe_blocks_recurrence_rules[offStartIndex]:Object(external_tribe_common_utils_globals_.postObjects)().tribe_events.meta._tribe_blocks_recurrence_exclusions[offStartIndex],updatedOffStartRule=Object.keys(offStartRule).reduce(((carry,key)=>(KEY_IS_OFF_START===key||(carry[key]=offStartRule[key]),carry)),{}),sync=isRecurring?external_tribe_events_pro_data_blocks_recurring_actions_.syncRule:external_tribe_events_pro_data_blocks_exception_actions_.syncException;yield Object(external_tribe_modules_reduxSaga_effects_.put)(sync(action.index,updatedOffStartRule))}const updateRuleTypesIfCustom=handlers=>function*(rule,index){if(yield Object(external_tribe_modules_reduxSaga_effects_.select)(handlers.selectors.isRuleTypeCustom,{index:index}))return;const ruleType=yield Object(external_tribe_modules_reduxSaga_effects_.select)(handlers.proSelectors.getType,{index:index}),nonSingleRules=(yield Object(external_tribe_modules_reduxSaga_effects_.select)(handlers.proSelectors.getRules)).filter((rule=>rule.type!==SINGLE)),payload={isOffStart:!1,offStartIndex:-1};nonSingleRules.length&&ruleType===SINGLE||(payload.ruleTypes=handlers.options.ruleTypeOptions),yield Object(external_tribe_modules_reduxSaga_effects_.put)(handlers.actions.edit(index,payload))};function*updateCustomRuleTypes(){const recurrenceRules=yield Object(external_tribe_modules_reduxSaga_effects_.select)(getAllRecurrenceRules),exceptionRules=yield Object(external_tribe_modules_reduxSaga_effects_.select)(getAllExceptionRules);yield Object(external_tribe_modules_reduxSaga_effects_.all)(recurrenceRules.map(((rule,index)=>Object(external_tribe_modules_reduxSaga_effects_.call)(updateRuleTypesIfCustom({actions:{edit:editRecurrenceRule},selectors:recurring_selectors_namespaceObject,proSelectors:external_tribe_events_pro_data_blocks_recurring_selectors_,options:{ruleTypeOptions:RECURRENCE_RULE_TYPES_OPTIONS}}),rule,index)))),yield Object(external_tribe_modules_reduxSaga_effects_.all)(exceptionRules.map(((rule,index)=>Object(external_tribe_modules_reduxSaga_effects_.call)(updateRuleTypesIfCustom({actions:{edit:editExceptionRule},selectors:exception_selectors_namespaceObject,proSelectors:external_tribe_events_pro_data_blocks_exception_selectors_,options:{ruleTypeOptions:EXCEPTION_RULE_TYPES_OPTIONS}}),rule,index))))}function*shared_sagas_watchers(){yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_data_blocks_datetime_types_.SET_START_DATE_TIME],updateRulesOnStartTimeChange),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([external_tribe_events_pro_data_blocks_recurring_types_.EDIT_RULE],updateRulesOnEdit),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([EDIT_RECURRENCE_RULE],updateCustomRule),yield Object(external_tribe_modules_reduxSaga_effects_.takeEvery)([EDIT_EXCEPTION_RULE],updateCustomRule);const channel=yield Object(external_tribe_modules_reduxSaga_effects_.call)(external_tribe_events_pro_data_status_sagas_.createWPEditorChannel);for(;;)yield Object(external_tribe_modules_reduxSaga_effects_.take)(channel),yield Object(external_tribe_modules_reduxSaga_effects_.call)(updateCustomRuleTypes)}var external_moment_=__webpack_require__("wy2R");function reducer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function reducer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?reducer_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):reducer_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const shared_reducer_DEFAULT_STATE={dayOfMonthOptions:Object(external_moment_.isMoment)(external_tribe_events_data_blocks_datetime_reducer_.defaultStartMoment)?utils_getDayOfMonthOptions(external_tribe_events_data_blocks_datetime_reducer_.defaultStartMoment):[]};function event_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function event_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?event_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):event_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const event_DEFAULT_STATE=tecEventDetails&&tecEventDetails.event?tecEventDetails.event:{};var reducer_event=(state=event_DEFAULT_STATE,action)=>"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_EVENT"===action.type?event_objectSpread(event_objectSpread({},state),action.payload):state;function occurrence_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function occurrence_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?occurrence_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):occurrence_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const occurrence_DEFAULT_STATE=tecEventDetails&&tecEventDetails.occurrence?tecEventDetails.occurrence:{};var occurrence=(state=occurrence_DEFAULT_STATE,action)=>"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_OCCURRENCE"===action.type?occurrence_objectSpread(occurrence_objectSpread({},state),action.payload):state;function series_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function series_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?series_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):series_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const series_DEFAULT_STATE=tecEventDetails&&tecEventDetails.series?tecEventDetails.series:{};var series=(state=series_DEFAULT_STATE,action)=>"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_SERIES"===action.type?series_objectSpread(series_objectSpread({},state),action.payload):state;function event_details_reducer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function event_details_reducer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?event_details_reducer_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):event_details_reducer_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const event_details_reducer_DEFAULT_STATE=tecEventDetails||{};const getEventDetails=state=>state[constants_namespaceObject.TEC_EVENTS_PRO_PLUGIN].eventDetails;Object(external_tribe_modules_reselect_.createSelector)([getEventDetails],(eventDetails=>eventDetails.event)),Object(external_tribe_modules_reselect_.createSelector)([getEventDetails],(eventDetails=>eventDetails.occurrence)),Object(external_tribe_modules_reselect_.createSelector)([getEventDetails],(eventDetails=>eventDetails.series));var event_details=(state=event_details_reducer_DEFAULT_STATE,action)=>{switch(action.type){case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS":return event_details_reducer_objectSpread(event_details_reducer_objectSpread({},state),action.payload);case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_EVENT":return event_details_reducer_objectSpread(event_details_reducer_objectSpread({},state),{},{event:reducer_event(state.event,action)});case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_OCCURRENCE":return event_details_reducer_objectSpread(event_details_reducer_objectSpread({},state),{},{occurrence:occurrence(state.occurrence,action)});case"@@MT/EVENTS_PRO/UPDATE_EVENT_DETAILS_SERIES":return event_details_reducer_objectSpread(event_details_reducer_objectSpread({},state),{},{series:series(state.series,action)});default:return state}},reducers=Object(external_tribe_modules_redux_.combineReducers)({blocks:blocks_reducer,shared:(state=shared_reducer_DEFAULT_STATE,action)=>"@@MT/EVENTS_PRO/SET_DAY_OF_MONTH_OPTIONS"===action.type?reducer_objectSpread(reducer_objectSpread({},state),{},{dayOfMonthOptions:action.payload.options}):state,eventDetails:event_details});const{dispatch:subscribers_dispatch,select:subscribers_select,subscribe:subscribe}=wp.data;var asyncToGenerator=__webpack_require__("yXPU"),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator);const{apiFetch:apiFetch}=wp,{dispatch:occurrences_dispatch,select:occurrences_select,subscribe:occurrences_subscribe}=wp.data,occurrences_state={saving:!1,running:!1,noticeId:"tec-events-pro-occurrences",subscriptions:[],isSavingMetaBoxes:!1};function _getOccurrenceNotice(){return(_getOccurrenceNotice=asyncToGenerator_default()((function*(id){const notices=yield apiFetch({path:`/tec/v1/events/${id}/notices/occurrences/`,method:"GET"});return Array.isArray(notices)&&notices?notices.map(JSON.parse):[]}))).apply(this,arguments)}function clearSubscriptions(){Array.from(occurrences_state.subscriptions).map((unsubscribe=>{unsubscribe()})),occurrences_state.subscriptions=[]}function createNotice(id){return function getOccurrenceNotice(_x){return _getOccurrenceNotice.apply(this,arguments)}(id).then((notices=>{notices.length<=0||(occurrences_dispatch("core/notices").createSuccessNotice(notices.shift(),{id:occurrences_state.noticeId,isDismissible:!0,__unstableHTML:!0,explicitDismiss:!1}),function attachListener(onDismiss){const unsubscribe=occurrences_subscribe((()=>{occurrences_select("core/notices").getNotices().filter((notice=>notice.id===occurrences_state.noticeId)).length<=0&&(unsubscribe(),onDismiss())}));return occurrences_state.subscriptions.push(unsubscribe),unsubscribe}(function deleteNotice(id){return asyncToGenerator_default()((function*(){return yield apiFetch({path:`/tec/v1/events/${id}/notices/occurrences/`,method:"DELETE"})}))}(id)))}))}const isDoneSavingMetaboxes=()=>occurrences_select("core/edit-post").isSavingMetaBoxes()?(occurrences_state.isSavingMetaBoxes=!0,!1):!!occurrences_state.isSavingMetaBoxes&&(occurrences_state.isSavingMetaBoxes=!1,!0);function editListener(){if(!isDoneSavingMetaboxes()||occurrences_state.running)return!1;const coreEditor=occurrences_select("core/editor"),didPostSaveRequestSucceed=coreEditor.didPostSaveRequestSucceed();occurrences_state.running=!0;const id=coreEditor.getCurrentPostId();return id&&didPostSaveRequestSucceed&&(clearSubscriptions(),createNotice(id).then(onPublishOrUpdate)),occurrences_state.running}function onPublishOrUpdate(){occurrences_state.running=!1;const subscription=occurrences_subscribe(editListener);return occurrences_state.subscriptions.push(subscription),subscription}function init(){!function onLoad(){const unsubscribeOnLoad=occurrences_subscribe((()=>{const coreEditor=occurrences_select("core/editor");if(!coreEditor.__unstableIsEditorReady())return;if(unsubscribeOnLoad(),coreEditor.isCleanNewPost())return;const id=coreEditor.getCurrentPostId();id&&(clearSubscriptions(),createNotice(id).then(onPublishOrUpdate))}));return occurrences_state.subscriptions.push(unsubscribeOnLoad),unsubscribeOnLoad}(),onPublishOrUpdate()}var data_subscribers=()=>{(()=>{const unsubscribe=subscribe((()=>{subscribers_select("core/notices").getNotices().forEach((notice=>{external_tribe_events_pro_data_status_sagas_.NOTICE_EDITING_SERIES===notice.id&&(subscribers_dispatch("core/notices").removeNotice(notice.id),unsubscribe())}))})),closeListener=subscribe((()=>{subscribers_select("core/editor").__unstableIsEditorReady()&&closeListener()}))})(),init()};const data_setInitialState=data=>{blocks_reducer_setInitialState(data),(data=>{shared_reducer_DEFAULT_STATE.dayOfMonthOptions=utils_getDayOfMonthOptions(Object(external_tribe_common_utils_moment_.toMoment)(data.meta._EventStartDate))})(data)},initStore=()=>{const data=external_tribe_common_utils_.globals.postObjects().tribe_events;data.is_new_post||data_setInitialState(data);const{dispatch:dispatch,injectReducers:injectReducers}=external_tribe_common_store_.store;[exception_namespaceObject.sagas,recurring_namespaceObject.sagas,shared_sagas_watchers].forEach((sagas=>external_tribe_common_store_.store.run(sagas))),data_subscribers(),injectReducers({[constants_namespaceObject.TEC_EVENTS_PRO_PLUGIN]:reducers}),dispatch(external_tribe_common_data_plugins_.actions.addPlugin(constants_namespaceObject.TEC_EVENTS_PRO_PLUGIN))},getStore=()=>external_tribe_common_store_.store;var external_React_=__webpack_require__("cDcd");const{__:hooks_}=wp.i18n,filterRenderRecurrence=content=>{const state=external_tribe_common_store_.store.getState();return recurrence_selectors_namespaceObject.isEventTicketsActive(state)&&(recurrence_selectors_namespaceObject.hasRSVP(state)||recurrence_selectors_namespaceObject.hasTickets(state))?wp.element.createElement("div",{className:"tribe-editor__not-supported-message"},wp.element.createElement("p",{className:"tribe-editor__not-supported-message-text"},hooks_("Recurrence patterns are not yet supported for events with tickets or RSVPs.","tribe-events-calendar-pro"),wp.element.createElement("br",null),wp.element.createElement("a",{className:"tribe-editor__not-supported-message-link",href:"https://evnt.is/1b7a",target:"_blank",rel:"noopener noreferrer"},hooks_("Read about our plans for future features.","tribe-events-calendar-pro")))):content};var recurrence=()=>{wp.hooks.addFilter("blocks.recurrence.renderRecurrenceHook","tec/filterRenderRecurrence",filterRenderRecurrence)};const filterRecurrenceDescription=(content,props)=>null;var recurrence_description=()=>{wp.hooks.addFilter("blocks.recurrenceDescription.contentHook","tec/filterRecurrenceDescription",filterRecurrenceDescription)};__webpack_require__("O7uX");initStore(),recurrence(),recurrence_description();var external_tribe_events_data_blocks_datetime_=__webpack_require__("HJt2");const UPDATE_TYPE_KEY="_tec_update_type",INITIAL_META_KEY="_tec_initial_meta",{toMoment:toMoment}=external_tribe_common_utils_.moment,clearDialogContent=()=>{tec.editorDialog.el.$instance.empty()},setDialogContent=contentSettings=>{contentSettings.forEach((function(settings){"text"===settings.type?tec.editorDialog.el.$instance.append(function(settings){return`<div class="tec-events-pro-dialog__text-row">\n\t\t<p class="tec-events-pro-dialog__text">\n\t\t\t${settings.text}\n\t\t</p>\n\t</div>`}(settings)):tec.editorDialog.el.$instance.append(function(settings){const checked=settings.checked?"checked":"",classes=["tec-events-pro-dialog__input-row",`tec-events-pro-dialog__input-row--${settings.type}`].concat(settings.classes).join(" "),inputClasses=["tec-events-pro-dialog__radio-input"].concat(settings.inputClasses).join(" "),labelClasses=["tec-events-pro-dialog__radio-input-label"].concat(settings.labelClasses).join(" "),id=`tec-events-pro-dialog__radio-input--${settings.type}`;let html=`<div class="${classes}">\n\t\t<input type="radio" name="_tec_update_type" value="${settings.type}" class="${inputClasses}" id="${id}" ${checked} />\n\t\t<label class="${labelClasses}" for="${id}">\n\t\t\t${settings.label}`;return settings.labelHelpText&&(html+='<div><em style="font-style: italic; color: gray; font-size: 90%">'+settings.labelHelpText+"</em></div>"),html+="</label></div>",html}(settings))}))},getDialogThisEventLabel=()=>{const labelPieces=[window.tecEventsSeriesBlockEditor.thisEvent],state=getStore().getState(),start=external_tribe_events_data_blocks_datetime_.selectors.getStart(state),startMoment=toMoment(start);if(!startMoment.isValid())return labelPieces[0];const isAllDay=external_tribe_events_data_blocks_datetime_.selectors.getAllDay(state),dateSeparator=external_tribe_events_data_blocks_datetime_.selectors.getDateSeparator(state);let dateTimeString=startMoment.format("MMMM D, YYYY");return dateTimeString+=isAllDay?` ${window.tecEventsSeriesBlockEditor.allDay}`:` ${dateSeparator} ${startMoment.format("H:mma")}`,dateTimeString=`(${dateTimeString})`,labelPieces.push(dateTimeString),labelPieces.join(" ")};var dialog=()=>{tec.editorDialog.setupDialog()};const{select:state_select}=wp.data,flags={isSavingPost:!1},state_selectors_saveButton="button.editor-post-publish-button",state_selectors_saveDraftButton="button.editor-post-save-draft",state_selectors_eventSeriesSelect="#_tec_relationship_event_to_series",state_selectors_editLinkContainer=".tec-events-pro-series__edit-link-container",state_selectors_editLink=".tec-events-pro-series__edit-link";function update_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function update_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?update_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):update_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const{dispatch:update_dispatch,select:update_select}=wp.data,handleUpdateDialogConfirmClick=()=>{const{editPost:editPost,savePost:savePost}=update_dispatch("core/editor"),selectedOption=tec.editorDialog.el.$instance.find("input:checked").val(),initialMeta=update_select("core/editor").getCurrentPost();tec.editorDialog.closeDialog(),editPost({[UPDATE_TYPE_KEY]:selectedOption,[INITIAL_META_KEY]:initialMeta}),savePost()},getUpdateDialogContentSettings=()=>{const settings=[],startDateChanged=(()=>{const state=getStore().getState(),currentStartDate=Object(external_tribe_events_data_blocks_datetime_selectors_.getStart)(state).split(" ")[0],currentPost=state_select("core/editor").getCurrentPost(),{meta:meta}=currentPost;return meta._EventStartDate.split(" ")[0]!==currentStartDate})(),recurrenceRuleChanged=(()=>{const state=getStore().getState(),currentRecurrenceRules=Object(external_tribe_events_pro_data_blocks_recurring_selectors_.getRules)(state),currentPost=state_select("core/editor").getCurrentPost(),{meta:meta}=currentPost;return(""===meta._tribe_blocks_recurrence_rules?"[]":meta._tribe_blocks_recurrence_rules)!==JSON.stringify(currentRecurrenceRules)})()||(()=>{const state=getStore().getState(),currentExceptionRules=Object(external_tribe_events_pro_data_blocks_exception_selectors_.getExceptions)(state),currentPost=state_select("core/editor").getCurrentPost(),{meta:meta}=currentPost;return(""===meta._tribe_blocks_recurrence_exclusions?"[]":meta._tribe_blocks_recurrence_exclusions)!==JSON.stringify(currentExceptionRules)})(),l10n=window.tecEventsSeriesBlockEditor,updateOptions={single:!0,upcoming:!0,all:!0};return!startDateChanged||tecEventDetails&&tecEventDetails.isRdate||(updateOptions.all=!1),recurrenceRuleChanged&&(updateOptions.single=!1),updateOptions.all||updateOptions.single?(updateOptions.single&&settings.push({type:"single",label:getDialogThisEventLabel(),labelHelpText:l10n.thisEventHelpText,classes:[],inputClasses:[],labelClasses:[],checked:!1}),settings.push({type:"upcoming",label:l10n.upcomingSetting,classes:[],inputClasses:[],labelClasses:[],checked:!updateOptions.all}),updateOptions.all&&settings.push({type:"all",label:l10n.allEvents,classes:[],inputClasses:[],labelClasses:[],checked:!0}),settings):(settings.push({type:"text",text:l10n.effectThisAndFollowingEventsWarning}),settings.push({type:"upcoming",label:l10n.upcomingSetting,classes:["hidden"],inputClasses:[],labelClasses:[],checked:!0}),settings)},showUpdatePrompt=()=>{tec.editorDialog.el.$instance.attr("title",window.tecEventsSeriesBlockEditor.editModalTitle),clearDialogContent(),setDialogContent(getUpdateDialogContentSettings()),tec.editorDialog.setDialogSettings(update_objectSpread(update_objectSpread({},tec.editorDialog.defaultDialogSettings),{},{buttons:[{class:"button-primary",text:window.tecEventsSeriesBlockEditor.okButton,click:handleUpdateDialogConfirmClick}]})),tec.editorDialog.openDialog()},handleSaveButtonClick=()=>{const currentPost=update_select("core/editor").getCurrentPost(),{meta:meta}=currentPost;if(meta._tec_requires_first_save)return;""!==meta._tribe_blocks_recurrence_rules&&"[]"!==meta._tribe_blocks_recurrence_rules&&showUpdatePrompt()},{dispatch:post_save_dispatch,select:post_save_select,subscribe:post_save_subscribe}=wp.data,post_save_state={unsubscribe:null},setPostSaving=()=>{const{meta:meta}=post_save_select("core/editor").getCurrentPost();if(!meta)return;if(post_save_select("core/editor").isSavingPost())return;post_save_state.unsubscribe&&post_save_state.unsubscribe();const{lockPostSaving:lockPostSaving,lockPostAutosaving:lockPostAutosaving,unlockPostSaving:unlockPostSaving,unlockPostAutosaving:unlockPostAutosaving}=post_save_dispatch("core/editor");(()=>{const{getCurrentPost:getCurrentPost,isEditedPostDirty:isEditedPostDirty,isEditedPostNew:isEditedPostNew}=post_save_select("core/editor"),{meta:meta}=getCurrentPost();if(meta&&meta._tec_requires_first_save)return!1;const isRecurring=""!==meta._tribe_blocks_recurrence_rules&&"[]"!==meta._tribe_blocks_recurrence_rules;return!isEditedPostNew()&&isEditedPostDirty()&&isRecurring})()?(lockPostAutosaving(),lockPostSaving(),(()=>{const saveButton=document.querySelector("button.editor-post-publish-button");saveButton&&(saveButton.setAttribute("aria-disabled","false"),saveButton.removeEventListener("click",handleSaveButtonClick),saveButton.addEventListener("click",handleSaveButtonClick))})()):(unlockPostSaving(),unlockPostAutosaving(),(()=>{const saveButton=document.querySelector("button.editor-post-publish-button");saveButton&&saveButton.removeEventListener("click",handleSaveButtonClick)})()),post_save_state.unsubscribe=post_save_subscribe(setPostSaving)};var post_save=()=>{post_save_state.unsubscribe=post_save_subscribe(setPostSaving)};function delete_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function delete_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?delete_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):delete_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const{dispatch:delete_dispatch,select:delete_select,subscribe:delete_subscribe}=wp.data,delete_state={deleteButton:null},handleDeleteDialogConfirmClick=()=>{const selectedOption=tec.editorDialog.el.$instance.find("input:checked").val();delete_dispatch("core/notices").removeNotice("TRASH_POST_NOTICE_ID");const postTypeSlug=delete_select("core/editor").getCurrentPostType(),postType=delete_select("core").getPostType(postTypeSlug),currentPost=delete_select("core/editor").getCurrentPost();wp.apiFetch({path:`/wp/v2/${postType.rest_base}/${currentPost.id}?_tec_update_type=${selectedOption}`,method:"DELETE"}).then((response=>{window.location.replace(response._tec_redirect_url)})).catch((error=>{console.error(error)}))},showDeletePrompt=()=>{const l10n=window.tecEventsSeriesBlockEditor;tec.editorDialog.el.$instance.attr("title",l10n.trashRecurringEvent),clearDialogContent(),setDialogContent((()=>{const settings=[],l10n=window.tecEventsSeriesBlockEditor;return settings.push({type:"single",label:getDialogThisEventLabel(),classes:[],inputClasses:[],labelClasses:[],checked:!1}),settings.push({type:"upcoming",label:l10n.upcomingSetting,classes:[],inputClasses:[],labelClasses:[],checked:!1}),settings.push({type:"all",label:l10n.allEvents,classes:[],inputClasses:[],labelClasses:[],checked:!0}),settings})()),tec.editorDialog.setDialogSettings(delete_objectSpread(delete_objectSpread({},tec.editorDialog.defaultDialogSettings),{},{buttons:[{class:"button-primary",text:window.tecEventsSeriesBlockEditor.okButton,click:handleDeleteDialogConfirmClick}]})),tec.editorDialog.openDialog()},handleDeleteButtonClick=event=>{const currentPost=delete_select("core/editor").getCurrentPost(),{meta:meta}=currentPost;""!==meta._tribe_blocks_recurrence_rules&&"[]"!==meta._tribe_blocks_recurrence_rules&&(event.preventDefault(),event.stopPropagation(),showDeletePrompt())},isTrashAvailable=()=>{const{isEditedPostNew:isEditedPostNew,getCurrentPostId:getCurrentPostId,getCurrentPostType:getCurrentPostType}=delete_select("core/editor"),{getPostType:getPostType,canUser:canUser}=delete_select("core"),postId=getCurrentPostId();if(!postId)return!1;const postType=getPostType(getCurrentPostType()),resource=postType&&postType.rest_base||"",canUserDelete=!(!postId||!resource)&&canUser("delete",resource,postId);return!isEditedPostNew()&&postId&&canUserDelete},setState=()=>{const isSidebarOpen=delete_select("core/edit-post").isEditorSidebarOpened();if(!isSidebarOpen||delete_state.deleteButton&&delete_state.deleteButton.isConnected)!isSidebarOpen&&delete_state.deleteButton&&(delete_state.deleteButton.removeEventListener("click",handleDeleteButtonClick),delete_state.deleteButton=null);else{const intervalId=setInterval((()=>{const deleteButton=document.querySelector("button.editor-post-trash");deleteButton&&(clearInterval(intervalId),delete_state.deleteButton=deleteButton,delete_state.deleteButton.addEventListener("click",handleDeleteButtonClick))}),10)}};var dialog_delete=()=>{isTrashAvailable()&&setState(),delete_subscribe((()=>{isTrashAvailable()&&setState()}))};dialog(),post_save(),dialog_delete();var external_tribe_modules_classnames_=__webpack_require__("K2gz"),external_tribe_modules_classnames_default=__webpack_require__.n(external_tribe_modules_classnames_),external_tribe_common_elements_=__webpack_require__("6Ugf"),external_tribe_events_pro_data_blocks_=__webpack_require__("PSCs");const{addFilter:addFilter}=wp.hooks,day_of_week_recurrenceStrings=Object(external_tribe_common_utils_globals_.get)("tribe_events_pro_recurrence_strings"),{lockIconTooltip:lockIconTooltip}=day_of_week_recurrenceStrings.customTablesV1.recurrence,filterDayOfWeekContent=(content,props)=>{var _tecEventDetails;const{blockType:blockType,checked:checked,className:className,disabled:disabled,id:id,index:index,labelComponent:labelComponent,onChange:onChange,value:value}=props,state=external_tribe_common_store_.store.getState(),isExceptionRule=blockType!==external_tribe_events_pro_data_blocks_.constants.RECURRING,isCustom=(isExceptionRule?exception_selectors_namespaceObject:recurring_selectors_namespaceObject).isRuleTypeCustom(state,{index:index}),startMoment=Object(external_tribe_common_utils_moment_.toMoment)(Object(external_tribe_events_data_blocks_datetime_selectors_.getStart)(state)),weekday=getWeekdayName(startMoment),showLockIcon="undefined"!=typeof tecEventDetails&&!(null!==(_tecEventDetails=tecEventDetails)&&void 0!==_tecEventDetails&&_tecEventDetails.isRdate)&&!isExceptionRule&&!isCustom&&weekday.toLowerCase()===value;return wp.element.createElement("div",{className:external_tribe_modules_classnames_default()("tribe-editor__day-of-week",className)},wp.element.createElement(external_tribe_common_elements_.Checkbox,{checked:checked,disabled:disabled,id:id,label:labelComponent,onChange:onChange,value:value}),showLockIcon&&wp.element.createElement("span",{className:"tribe-editor__day-of-week__lock dashicons dashicons-lock",title:lockIconTooltip}))};var day_of_week=()=>{addFilter("elements.dayOfWeek.dayOfWeekContentHook","tec/filterDayOfWeekContent",filterDayOfWeekContent)};const{addFilter:singular_addFilter}=wp.hooks,{__:singular_}=wp.i18n;var singular=()=>{singular_addFilter("elements.exceptionField.singularTypePickerRowLabelHook","tec/filterSingularTypePickerRowLabelHook",(()=>singular_("Not","tribe-events-calendar-pro")))},external_tribe_events_pro_elements_=__webpack_require__("8N8N"),external_tribe_modules_reactRedux_=__webpack_require__("h74D"),external_tribe_modules_propTypes_=__webpack_require__("rf6O"),external_tribe_modules_propTypes_default=__webpack_require__.n(external_tribe_modules_propTypes_);const{__:template_}=wp.i18n,EveryFrequency=({afterLabel:afterLabel,blockType:blockType,className:className,disabled:disabled,index:index,selected:selected})=>wp.element.createElement(external_tribe_events_pro_elements_.LabeledRow,{className:external_tribe_modules_classnames_default()("tribe-editor__every-frequency",className),label:template_("Every","tribe-events-calendar-pro")},wp.element.createElement(external_tribe_events_pro_elements_.FrequencySelect,{blockType:blockType,disabled:disabled,index:index,selected:selected}),wp.element.createElement("span",{className:"tribe-editor__after-every-frequency"},afterLabel));EveryFrequency.propTypes={afterLabel:external_tribe_modules_propTypes_default.a.string.isRequired,blockType:external_tribe_modules_propTypes_default.a.oneOf(external_tribe_events_pro_data_blocks_constants_.BLOCK_TYPES),className:external_tribe_modules_propTypes_default.a.string,disabled:external_tribe_modules_propTypes_default.a.bool,index:external_tribe_modules_propTypes_default.a.number.isRequired,selected:external_tribe_common_data_plugins_.proptypes.ReactSelectOption.isRequired};var template=EveryFrequency,external_tribe_common_hoc_=__webpack_require__("Q9xL");const{RECURRING:RECURRING}=external_tribe_events_pro_data_blocks_constants_,{DAILY:element_DAILY,WEEKLY:element_WEEKLY,MONTHLY:element_MONTHLY,YEARLY:element_YEARLY}=external_tribe_events_pro_data_blocks_recurring_constants_,{DAY_LABEL:element_DAY_LABEL,WEEK_LABEL:element_WEEK_LABEL,MONTH_LABEL:element_MONTH_LABEL,YEAR_LABEL:element_YEAR_LABEL,DAY_LABEL_PLURAL:element_DAY_LABEL_PLURAL,WEEK_LABEL_PLURAL:element_WEEK_LABEL_PLURAL,MONTH_LABEL_PLURAL:element_MONTH_LABEL_PLURAL,YEAR_LABEL_PLURAL:element_YEAR_LABEL_PLURAL}=shared_constants_namespaceObject,getSelected=(state,ownProps)=>(ownProps.blockType===RECURRING?external_tribe_events_pro_data_blocks_recurring_selectors_:external_tribe_events_pro_data_blocks_exception_selectors_).getTypeOption(state,ownProps),getAfterLabel=(state,ownProps)=>{const frequency=((state,ownProps)=>(ownProps.blockType===RECURRING?external_tribe_events_pro_data_blocks_recurring_selectors_:external_tribe_events_pro_data_blocks_exception_selectors_).getBetween(state,ownProps))(state,ownProps),isPlural=frequency>1;let label="";switch(ownProps.selected.value){case element_DAILY:label=isPlural?element_DAY_LABEL_PLURAL:element_DAY_LABEL;break;case element_WEEKLY:label=isPlural?element_WEEK_LABEL_PLURAL:element_WEEK_LABEL;break;case element_MONTHLY:label=isPlural?element_MONTH_LABEL_PLURAL:element_MONTH_LABEL;break;case element_YEARLY:label=isPlural?element_YEAR_LABEL_PLURAL:element_YEAR_LABEL}return label};var every_frequency=Object(external_tribe_modules_redux_.compose)(Object(external_tribe_common_hoc_.withStore)(),Object(external_tribe_modules_reactRedux_.connect)(((state,ownProps)=>({afterLabel:getAfterLabel(state,ownProps),selected:getSelected(state,ownProps)}))))(template),external_wp_i18n_=__webpack_require__("l3Sj");__webpack_require__("644Q");const DayOfMonthPicker=({className:className,isCustom:isCustom,onChange:onChange,options:options,value:value})=>wp.element.createElement("div",{className:external_tribe_modules_classnames_default()("tribe-editor__day-of-month-picker",className)},wp.element.createElement(external_tribe_common_elements_.Select,{className:"tribe-editor__day-of-month-picker__day-of-month-select",backspaceRemovesValue:!1,value:value,isDisabled:isCustom,isSearchable:!1,options:options,onChange:onChange}));DayOfMonthPicker.propTypes={className:external_tribe_modules_propTypes_default.a.string,isCustom:external_tribe_modules_propTypes_default.a.bool,onChange:external_tribe_modules_propTypes_default.a.func,options:external_tribe_modules_propTypes_default.a.arrayOf(external_tribe_common_data_plugins_.proptypes.ReactSelectOption).isRequired,value:external_tribe_common_data_plugins_.proptypes.ReactSelectOptions.isRequired};var day_of_month_picker_template=DayOfMonthPicker,external_tribe_events_pro_data_blocks_recurring_=__webpack_require__("JXX8"),external_tribe_events_pro_data_blocks_exception_=__webpack_require__("Rkpb");var day_of_month_picker=Object(external_tribe_modules_redux_.compose)(Object(external_tribe_common_hoc_.withStore)(),Object(external_tribe_modules_reactRedux_.connect)(((state,ownProps)=>{var _tecEventDetails;const proSelectors=ownProps.blockType===external_tribe_events_pro_data_blocks_.constants.RECURRING?external_tribe_events_pro_data_blocks_recurring_.selectors:external_tribe_events_pro_data_blocks_exception_.selectors,optionValue=(state=>{const{week:week,day:day}=state;return week?`${week}-${day}`:String(day)})({week:proSelectors.getWeek(state,ownProps),day:proSelectors.getDay(state,ownProps)}),isRdate="undefined"!=typeof tecEventDetails&&(null===(_tecEventDetails=tecEventDetails)||void 0===_tecEventDetails?void 0:_tecEventDetails.isRdate),options=ownProps.isCustom||isRdate?(optionValue=>{const valuesArr=optionValue.split("-"),recurrenceStrings=Object(external_tribe_common_utils_globals_.get)("tribe_events_pro_recurrence_strings");if(1===valuesArr.length){const date=valuesArr[0];return[{label:recurrenceStrings.customTablesV1.dayOfMonth.date[date],value:String(date)}]}if(2===valuesArr.length){const patternKey=valuesArr[0]+isoWeekdayToDayNameMap[valuesArr[1]],patternObj=recurrenceStrings.customTablesV1.dayOfMonth.pattern[patternKey];return[{label:patternObj.label,value:patternObj.ordinal.toLowerCase()+"-"+patternObj.day}]}return[]})(optionValue):shared_selectors_namespaceObject.getDayOfMonthOptions(state,ownProps);let value=external_lodash_find_default()(options,(option=>optionValue===option.value));return value=!value&&options.length>0?options[0]:value,{options:options,value:value}}),((dispatch,ownProps)=>({onChange:selectedOption=>{const edit=ownProps.blockType===external_tribe_events_pro_data_blocks_.constants.RECURRING?external_tribe_events_pro_data_blocks_recurring_.actions.editRule:external_tribe_events_pro_data_blocks_exception_.actions.editException,ruleUpdates=mapOptionValueToState(selectedOption.value);dispatch(edit(ownProps.index,ruleUpdates))}}))))(day_of_month_picker_template);const OnDayOfMonthPicker=({blockType:blockType,className:className,index:index,isCustom:isCustom})=>wp.element.createElement(external_tribe_events_pro_elements_.LabeledRow,{className:external_tribe_modules_classnames_default()("tribe-editor__on-day-of-month-picker",className),label:Object(external_wp_i18n_.__)("On the","tribe-events-calendar-pro")},wp.element.createElement(day_of_month_picker,{blockType:blockType,isCustom:isCustom,index:index}));OnDayOfMonthPicker.propTypes={blockType:external_tribe_modules_propTypes_default.a.oneOf(external_tribe_events_pro_data_blocks_constants_.BLOCK_TYPES),className:external_tribe_modules_propTypes_default.a.string,index:external_tribe_modules_propTypes_default.a.number.isRequired,isCustom:external_tribe_modules_propTypes_default.a.bool};var on_day_of_month_picker=OnDayOfMonthPicker;const filterAfterTypePicker=(content,props)=>{const{blockType:blockType,index:index}=props,state=external_tribe_common_store_.store.getState(),selectors=blockType===external_tribe_events_pro_data_blocks_constants_.RECURRING?recurring_selectors_namespaceObject:exception_selectors_namespaceObject,selected=selectors.getTypeOption(state,{index:index}),isCustom=selectors.isRuleTypeCustom(state,{index:index});return wp.element.createElement(every_frequency,{blockType:blockType,disabled:isCustom,index:index,selected:selected})},filterOnDayOfWeek=(content,props)=>{const{blockType:blockType,index:index}=props,isCustom=(blockType===external_tribe_events_pro_data_blocks_constants_.RECURRING?recurring_selectors_namespaceObject:exception_selectors_namespaceObject).isRuleTypeCustom(external_tribe_common_store_.store.getState(),{index:index});return wp.element.createElement(external_tribe_events_pro_elements_.OnDayOfWeek,{blockType:blockType,sundayDisabled:isCustom,mondayDisabled:isCustom,tuesdayDisabled:isCustom,wednesdayDisabled:isCustom,thursdayDisabled:isCustom,fridayDisabled:isCustom,saturdayDisabled:isCustom,index:index})},filterOnDayOfMonthPicker=(content,props)=>{const{blockType:blockType,index:index}=props,isCustom=(blockType===external_tribe_events_pro_data_blocks_constants_.RECURRING?recurring_selectors_namespaceObject:exception_selectors_namespaceObject).isRuleTypeCustom(external_tribe_common_store_.store.getState(),{index:index});return wp.element.createElement(on_day_of_month_picker,{blockType:blockType,isCustom:isCustom,index:index})},filterInMonth=(content,props)=>{const{blockType:blockType,index:index}=props,isCustom=(blockType===external_tribe_events_pro_data_blocks_constants_.RECURRING?recurring_selectors_namespaceObject:exception_selectors_namespaceObject).isRuleTypeCustom(external_tribe_common_store_.store.getState(),{index:index});return wp.element.createElement(external_tribe_events_pro_elements_.InMonth,{blockType:blockType,disabled:isCustom,index:index})},filterSeriesEnds=(content,props)=>{const{blockType:blockType,index:index}=props,isCustom=(blockType===external_tribe_events_pro_data_blocks_constants_.RECURRING?recurring_selectors_namespaceObject:exception_selectors_namespaceObject).isRuleTypeCustom(external_tribe_common_store_.store.getState(),{index:index});return wp.element.createElement(external_tribe_events_pro_elements_.SeriesEnds,{blockType:blockType,dayPickerInputDisabled:isCustom,numberInputDisabled:isCustom,selectDisabled:isCustom,index:index})},{addFilter:daily_addFilter}=wp.hooks,{__:daily_}=wp.i18n;var daily=()=>{daily_addFilter("elements.exceptionField.dailyTypePickerRowLabelHook","tec/filterDailyTypePickerRowLabelHook",(()=>daily_("Not","tribe-events-calendar-pro"))),daily_addFilter("elements.exceptionField.dailyAfterTypePickerHook","tec/filterDailyAfterTypePicker",filterAfterTypePicker),daily_addFilter("elements.exceptionField.dailySeriesEndsRowLabelHook","tec/filterDailySeriesEndsRowLabel",(()=>{}))};const{addFilter:weekly_addFilter}=wp.hooks,{__:weekly_}=wp.i18n;var weekly=()=>{weekly_addFilter("elements.exceptionField.weeklyTypePickerRowLabelHook","tec/filterWeeklyTypePickerRowLabelHook",(()=>weekly_("Not","tribe-events-calendar-pro"))),weekly_addFilter("elements.exceptionField.weeklyAfterTypePickerHook","tec/filterWeeklyAfterTypePicker",filterAfterTypePicker),weekly_addFilter("elements.exceptionField.weeklyOnDayOfWeekHook","tec/filterWeeklyOnDayOfWeek",filterOnDayOfWeek),weekly_addFilter("elements.exceptionField.weeklySeriesEndsHook","tec/filterWeeklySeriesEnds",filterSeriesEnds)};const{addFilter:monthly_addFilter}=wp.hooks,{__:monthly_}=wp.i18n;var monthly=()=>{monthly_addFilter("elements.exceptionField.monthlyTypePickerRowLabelHook","tec/filterMonthlyTypePickerRowLabelHook",(()=>monthly_("Not","tribe-events-calendar-pro"))),monthly_addFilter("elements.exceptionField.monthlyAfterTypePickerHook","tec/filterMonthlyAfterTypePicker",filterAfterTypePicker),monthly_addFilter("elements.exceptionField.monthlySeriesEndsHook","tec/filterMonthlySeriesEnds",filterSeriesEnds)};const{addFilter:yearly_addFilter}=wp.hooks,{__:yearly_}=wp.i18n;var yearly=()=>{yearly_addFilter("elements.exceptionField.yearlyTypePickerRowLabelHook","tec/filterYearlyTypePickerRowLabelHook",(()=>yearly_("Not","tribe-events-calendar-pro"))),yearly_addFilter("elements.exceptionField.yearlyAfterTypePickerHook","tec/filterYearlyAfterTypePicker",filterAfterTypePicker),yearly_addFilter("elements.exceptionField.yearlyInMonthHook","tec/filterYearlyInMonth",filterInMonth),yearly_addFilter("elements.exceptionField.yearlySeriesEndsHook","tec/filterYearlySeriesEnds",filterSeriesEnds)};var exception_field=()=>{singular(),daily(),weekly(),monthly(),yearly()};const{addFilter:exception_form_addFilter}=wp.hooks,filterExceptionFieldOptions=(options,state,index)=>exception_selectors_namespaceObject.getExceptionRuleTypes(state,{index:index});var exception_form=()=>{exception_form_addFilter("elements.exceptionForm.exceptionFieldOptionsHook","tec/filterExceptionFieldOptions",filterExceptionFieldOptions)},external_tribe_common_icons_=__webpack_require__("GE2E");const{addFilter:month_tag_addFilter}=wp.hooks,month_tag_recurrenceStrings=Object(external_tribe_common_utils_globals_.get)("tribe_events_pro_recurrence_strings"),{lockIconTooltip:month_tag_lockIconTooltip}=month_tag_recurrenceStrings.customTablesV1.recurrence,filterMonthTagContent=(content,props)=>{const{blockType:blockType,children:children,className:className,disabled:disabled,index:index,onClick:onClick,value:value}=props,isRecurringRule=blockType===external_tribe_events_pro_data_blocks_.constants.RECURRING,state=external_tribe_common_store_.store.getState(),isCustom=(isRecurringRule?recurring_selectors_namespaceObject:exception_selectors_namespaceObject).isRuleTypeCustom(state,{index:index}),month=Object(external_tribe_common_utils_moment_.toMoment)(Object(external_tribe_events_data_blocks_datetime_selectors_.getStart)(state)).month()+1,iconNode=Object(external_React_.useMemo)((()=>!isRecurringRule||isCustom||month!==external_tribe_events_pro_data_blocks_recurring_constants_.MONTHS_OF_THE_YEAR_MAPPING_TO_STATE[value]?wp.element.createElement(external_React_.Fragment,null,wp.element.createElement(external_tribe_common_icons_.Close,null),wp.element.createElement("span",{className:"tribe-editor__month-tag__remove"},Object(external_wp_i18n_.__)("Remove","tribe-events-calendar-pro"))):wp.element.createElement("span",{className:"tribe-editor__month-tag__lock dashicons dashicons-lock",title:month_tag_lockIconTooltip})),[isRecurringRule,isCustom,month,value]);return wp.element.createElement("button",{className:external_tribe_modules_classnames_default()({"tribe-editor__month-tag":!0,"tribe-editor__month-tag--disabled":disabled},className),disabled:disabled,onClick:onClick},iconNode,children)};var month_tag=()=>{month_tag_addFilter("elements.monthTag.monthTagContentHook","tec/filterMonthTagContent",filterMonthTagContent)};const{addFilter:recurring_field_singular_addFilter}=wp.hooks,{__:recurring_field_singular_}=wp.i18n;var recurring_field_singular=()=>{recurring_field_singular_addFilter("elements.recurringField.singularTypePickerRowLabelHook","tec/filterSingularTypePickerRowLabelHook",(()=>recurring_field_singular_("Happens","tribe-events-calendar-pro")))};const{addFilter:recurring_field_daily_addFilter}=wp.hooks,{__:recurring_field_daily_}=wp.i18n;var recurring_field_daily=()=>{recurring_field_daily_addFilter("elements.recurringField.dailyFromTimeRangePickerHook","tec/filterDailyFromTimeRangePicker",(()=>null)),recurring_field_daily_addFilter("elements.recurringField.dailyRecurringToDateTimePickerHook","tec/filterDailyFromTimeRangePicker",(()=>null)),recurring_field_daily_addFilter("elements.recurringField.dailyTypePickerRowLabelHook","tec/filterDailyTypePickerRowLabelHook",(()=>recurring_field_daily_("Happens","tribe-events-calendar-pro"))),recurring_field_daily_addFilter("elements.recurringField.dailyAfterTypePickerHook","tec/filterDailyAfterTypePicker",filterAfterTypePicker)};const{addFilter:recurring_field_weekly_addFilter}=wp.hooks,{__:recurring_field_weekly_}=wp.i18n;var recurring_field_weekly=()=>{recurring_field_weekly_addFilter("elements.recurringField.weeklyFromTimeRangePickerHook","tec/filterWeeklyFromTimeRangePicker",(()=>null)),recurring_field_weekly_addFilter("elements.recurringField.weeklyRecurringToDateTimePickerHook","tec/filterWeeklyFromTimeRangePicker",(()=>null)),recurring_field_weekly_addFilter("elements.recurringField.weeklyTypePickerRowLabelHook","tec/filterWeeklyTypePickerRowLabelHook",(()=>recurring_field_weekly_("Happens","tribe-events-calendar-pro"))),recurring_field_weekly_addFilter("elements.recurringField.weeklyAfterTypePickerHook","tec/filterWeeklyAfterTypePicker",filterAfterTypePicker),recurring_field_weekly_addFilter("elements.recurringField.weeklyOnDayOfWeekHook","tec/filterWeeklyOnDayOfWeek",filterOnDayOfWeek),recurring_field_weekly_addFilter("elements.recurringField.weeklySeriesEndsHook","tec/filterWeeklySeriesEnds",filterSeriesEnds)};const{addFilter:recurring_field_monthly_addFilter}=wp.hooks,{__:recurring_field_monthly_}=wp.i18n;var recurring_field_monthly=()=>{recurring_field_monthly_addFilter("elements.recurringField.monthlyFromTimeRangePickerHook","tec/filterMonthlyFromTimeRangePicker",(()=>null)),recurring_field_monthly_addFilter("elements.recurringField.monthlyRecurringToDateTimePickerHook","tec/filterMonthlyFromTimeRangePicker",(()=>null)),recurring_field_monthly_addFilter("elements.recurringField.monthlyTypePickerRowLabelHook","tec/filterMonthlyTypePickerRowLabelHook",(()=>recurring_field_monthly_("Happens","tribe-events-calendar-pro"))),recurring_field_monthly_addFilter("elements.recurringField.monthlyAfterTypePickerHook","tec/filterMonthlyAfterTypePicker",filterAfterTypePicker),recurring_field_monthly_addFilter("elements.recurringField.monthlyOnDayOfMonthPickerHook","tec/filterMonthlyOnDayOfMonthPicker",filterOnDayOfMonthPicker),recurring_field_monthly_addFilter("elements.recurringField.monthlySeriesEndsHook","tec/filterMonthlySeriesEnds",filterSeriesEnds)};const{addFilter:recurring_field_yearly_addFilter}=wp.hooks,{__:recurring_field_yearly_}=wp.i18n;var recurring_field_yearly=()=>{recurring_field_yearly_addFilter("elements.recurringField.yearlyFromTimeRangePickerHook","tec/filterYearlyFromTimeRangePicker",(()=>null)),recurring_field_yearly_addFilter("elements.recurringField.yearlyRecurringToDateTimePickerHook","tec/filterYearlyFromTimeRangePicker",(()=>null)),recurring_field_yearly_addFilter("elements.recurringField.yearlyTypePickerRowLabelHook","tec/filterYearlyTypePickerRowLabelHook",(()=>recurring_field_yearly_("Happens","tribe-events-calendar-pro"))),recurring_field_yearly_addFilter("elements.recurringField.yearlyAfterTypePickerHook","tec/filterYearlyAfterTypePicker",filterAfterTypePicker),recurring_field_yearly_addFilter("elements.recurringField.yearlyInMonthHook","tec/filterYearlyInMonth",filterInMonth),recurring_field_yearly_addFilter("elements.recurringField.yearlyOnDayOfMonthPickerHook","tec/filterYearlyOnDayOfMonthPicker",filterOnDayOfMonthPicker),recurring_field_yearly_addFilter("elements.recurringField.yearlySeriesEndsHook","tec/filterYearlySeriesEnds",filterSeriesEnds)};var recurring_field=()=>{recurring_field_singular(),recurring_field_daily(),recurring_field_weekly(),recurring_field_monthly(),recurring_field_yearly()};const{__:recurring_form_,sprintf:sprintf}=wp.i18n,{addFilter:recurring_form_addFilter}=wp.hooks,filterRecurringFieldOptions=(options,state,index)=>recurring_selectors_namespaceObject.getRecurrenceRuleTypes(state,{index:index});var recurring_form=()=>{var _tecEventDetails;recurring_form_addFilter("elements.recurringForm.recurringFieldOptionsHook","tec/filterRecurringFieldOptions",filterRecurringFieldOptions),"undefined"!=typeof tecEventDetails&&null!==(_tecEventDetails=tecEventDetails)&&void 0!==_tecEventDetails&&_tecEventDetails.isRdateNoticeParts&&recurring_form_addFilter("elements.recurringForm.outputBeforeRecurringForm","tec/filterRecurringForm",(output=>{const{name:name,url:url}=tecEventDetails.isRdateNoticeParts,__html=sprintf(recurring_form_("This is a single occurrence. To change recurrence rules, go to %1$s.","tribe-events-calendar-pro"),`<a href=${url}>${name}</a>`);return wp.element.createElement("div",null,wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:__html}}))}))};const{Tooltip:Tooltip}=wp.components,{addFilter:type_picker_addFilter}=wp.hooks,{__:type_picker_}=wp.i18n,filterTypePickerContent=(content,props)=>{const{afterSelect:afterSelect,blockType:blockType,dispatch:dispatch,index:index,options:options,selected:selected}=props,isRecurring=blockType===external_tribe_events_pro_data_blocks_.constants.RECURRING,proEdit=isRecurring?external_tribe_events_pro_data_blocks_recurring_.actions.editRule:external_tribe_events_pro_data_blocks_exception_.actions.editException,edit=isRecurring?recurring_actions_namespaceObject.editRecurrenceRule:exception_actions_namespaceObject.editExceptionRule;return wp.element.createElement(external_React_.Fragment,null,wp.element.createElement(external_tribe_common_elements_.Select,{className:"tribe-editor__type-picker__type-select",backspaceRemovesValue:!1,value:selected,isSearchable:!1,options:options,onChange:selectedOption=>{dispatch(edit(index,{typeId:selectedOption.id})),dispatch(proEdit(index,{[external_tribe_events_pro_data_blocks_.constants.KEY_TYPE]:selectedOption.value}))},getOptionValue:option=>option.id}),afterSelect)},filterTypePickerSelectedOption=(selected,state,ownProps)=>(ownProps.blockType===external_tribe_events_pro_data_blocks_.constants.RECURRING?recurring_selectors_namespaceObject:exception_selectors_namespaceObject).getTypeOption(state,ownProps),filterAfterTypePickerSelect=(content,state,ownProps)=>{const{blockType:blockType,index:index}=ownProps;if(blockType===external_tribe_events_pro_data_blocks_.constants.EXCEPTION)return content;if(!recurring_selectors_namespaceObject.isRuleTypeCustom(state,{index:index}))return content;const text=type_picker_("This custom recurrence rule was created in a different calendar system\n\r and cannot be edited. Select a different option to create a new rule.","tribe-events-calendar-pro");return wp.element.createElement(Tooltip,{text:text},wp.element.createElement("span",{"aria-label":text,className:"tribe-editor__type-picker__type-select-after-tooltip dashicons dashicons-info",tabIndex:"0"}))};var type_picker=()=>{type_picker_addFilter("elements.typePicker.typePickerContentHook","tec/filterTypePickerContent",filterTypePickerContent),type_picker_addFilter("elements.typePicker.typePickerSelectedOptionHook","tec/filterTypePickerSelectedOption",filterTypePickerSelectedOption),type_picker_addFilter("elements.typePicker.afterTypePickerSelectHook","tec/filterAfterTypePickerSelect",filterAfterTypePickerSelect)};__webpack_require__("Ixdi");function occurrence_redirect_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function occurrence_redirect_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?occurrence_redirect_ownKeys(Object(t),!0).forEach((function(r){defineProperty_default()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):occurrence_redirect_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}(()=>{day_of_week(),exception_field(),exception_form(),month_tag(),recurring_field(),recurring_form(),type_picker()})();const{subscribe:occurrence_redirect_subscribe,select:occurrence_redirect_select}=wp.data,$=window.jQuery,occurrence_redirect_flags={isSavingMetaBoxes:!1};let ajaxTries=0,redirectData=null,dialogCloseButtonStyle=null;const unsubscribers={onMetaboxSave:null,listenForSaveClick:null},getRedirectDialogSettings=(title,confirmButtonLabel,location)=>occurrence_redirect_objectSpread(occurrence_redirect_objectSpread({},tec.editorDialog.defaultDialogSettings),{},{closeOnEscape:!1,dialogClass:"redirect-no-close",buttons:[{class:"button-primary",text:confirmButtonLabel,click:()=>(location=>{tec.editorDialog.closeDialog(),window.location.replace(location)})(location)}],title:title}),redirectWithNotice=response=>{if(!response||!response.data)return;redirectData=response.data;const{location:location,title:title,message:message,confirmButtonLabel:confirmButtonLabel,forceRedirect:forceRedirect}=redirectData;forceRedirect&&location?window.location.replace(location):location&&title&&message&&confirmButtonLabel&&(unsubscribers.onMetaboxSave&&unsubscribers.onMetaboxSave(),unsubscribers.listenForSaveClick&&unsubscribers.listenForSaveClick(),clearDialogContent(),setDialogContent((message=>{const settings=[];return settings.push({type:"text",text:message}),settings})(message)),tec.editorDialog.setDialogSettings(getRedirectDialogSettings(title,confirmButtonLabel,location)),tec.editorDialog.openDialog(),dialogCloseButtonStyle||(dialogCloseButtonStyle=document.createElement("style"),dialogCloseButtonStyle.type="text/css",dialogCloseButtonStyle.innerText=".redirect-no-close .ui-dialog-titlebar-close {display: none;}"),dialogCloseButtonStyle.isConnected||document.head.appendChild(dialogCloseButtonStyle))},fetchRedirectData=()=>{if(!window.tecCustomTablesV1BlocksEditor)return;const coreEditor=occurrence_redirect_select("core/editor"),{ajaxurl:ajaxurl,redirectAction:redirectAction,redirectNonceName:redirectNonceName,redirectNonce:redirectNonce,eventPostId:eventPostId}=tecCustomTablesV1BlocksEditor;ajaxTries=0,$.get(ajaxurl,{action:redirectAction,[redirectNonceName]:redirectNonce,event_id:coreEditor.getCurrentPostId(),event_post_id:eventPostId}).done(redirectWithNotice).fail(handleFetchRedirectDataFail)},handleFetchRedirectDataFail=(jqXHR,textStatus,errorThrown)=>{if(ajaxTries+=1,ajaxTries<3)return console.error("tec_custom_tables_v1_redirect_data ajax request failed, retrying again.",errorThrown),void fetchRedirectData();console.error("tec_custom_tables_v1_redirect_data ajax request failed:",errorThrown)},onMetaBoxSave=()=>{(occurrence_redirect_select("core/edit-post").isSavingMetaBoxes()?(occurrence_redirect_flags.isSavingMetaBoxes=!0,0):occurrence_redirect_flags.isSavingMetaBoxes&&(occurrence_redirect_flags.isSavingMetaBoxes=!1,1))&&fetchRedirectData()};(()=>{unsubscribers.onMetaboxSave=occurrence_redirect_subscribe(onMetaBoxSave)})();const{Button:Button}=wp.components,{PluginPostStatusInfo:PluginPostStatusInfo}=wp.editor,{__:duplicate_template_}=wp.i18n;var duplicate_template=({status:status})=>""!==tec_events_pro_duplicate.duplicate_link&&"auto-draft"!==status&&wp.element.createElement(PluginPostStatusInfo,null,wp.element.createElement(Button,{isTertiary:!0,className:"tec-event-duplicate-action__duplicate-link",href:tec_events_pro_duplicate.duplicate_link,style:{marginLeft:"-6px",textDecoration:"underline"},target:"_blank"},duplicate_template_("Duplicate","tribe-events-calendar-pro")));const applyWithSelect=wp.data.withSelect((select=>({select:select("core/editor").getEditedPostAttribute("status")})));var container=Object(external_tribe_modules_redux_.compose)(applyWithSelect)(duplicate_template);wp.plugins.registerPlugin("tec-event-duplicate",{render:container});const{subscribe:series_metabox_subscribe,select:series_metabox_select}=wp.data,series_metabox_$=window.jQuery;let series_metabox_ajaxTries=0;const series_metabox_el={saveButton:null,saveDraftButton:null,eventSeriesSelect:null},series_metabox_classes_hidden="hidden",series_metabox_unsubscribers={listenForEventSeriesSelect:null,getSeriesData:null},series_metabox_flags={isSavingPost:!1,isSavingMetaBoxes:!1},composeSeriesValue=item=>{const val={title:null,id:null};return"string"==typeof item&&(val.title=item),"object"==typeof item&&(val.title=item.title,val.id=item.id),val},serializeMetaSeriesOption=item=>JSON.stringify(item),fetchSeriesData=()=>{if(!window.tecCustomTablesV1BlocksEditor)return;const coreEditor=series_metabox_select("core/editor"),{ajaxurl:ajaxurl,seriesAction:seriesAction,seriesNonce:seriesNonce,seriesNonceName:seriesNonceName}=tecCustomTablesV1BlocksEditor;series_metabox_$.get(ajaxurl,{action:seriesAction,[seriesNonceName]:seriesNonce,event_id:coreEditor.getCurrentPostId()}).done((data=>{setSelectedSeriesOptionData(data),series_metabox_ajaxTries=0})).fail(handleFetchSeriesDataFail)},series_metabox_onMetaBoxSave=()=>{(series_metabox_select("core/edit-post").isSavingMetaBoxes()?(series_metabox_flags.isSavingMetaBoxes=!0,0):series_metabox_flags.isSavingMetaBoxes&&(series_metabox_flags.isSavingMetaBoxes=!1,1))&&fetchSeriesData()},getEventSeriesSelect=()=>{series_metabox_el.eventSeriesSelect||(series_metabox_el.eventSeriesSelect=document.querySelector(state_selectors_eventSeriesSelect))},handleChange=event=>{const $select=event.data.$target,$selected=$select.find(":selected");if(!$selected.length)return;const $linkContainer=$select.parent().find(state_selectors_editLinkContainer);if("-1"===$selected.val())return void $linkContainer.addClass(series_metabox_classes_hidden);const editLink=$selected.data("editLink");editLink?($linkContainer.find(state_selectors_editLink).attr("href",editLink),$linkContainer.removeClass(series_metabox_classes_hidden)):$linkContainer.addClass(series_metabox_classes_hidden)},createNewSeriesOptionFromTitle=()=>{if(getEventSeriesSelect(),!series_metabox_el.eventSeriesSelect)return;if("-1"!==String(series_metabox_el.eventSeriesSelect.value))return;const postTitle=(()=>{const coreEditor=series_metabox_select("core/editor"),editsTitle=String(coreEditor.getPostEdits().title).trim();return"undefined"!==editsTitle?String(editsTitle):String(coreEditor.getCurrentPost().title).trim()})();if(!postTitle.length)return;const val=serializeMetaSeriesOption(composeSeriesValue(postTitle)),newOption=new Option(postTitle,val,!0,!0);series_metabox_$(series_metabox_el.eventSeriesSelect).append(newOption).trigger("change")},setSelectedSeriesOptionData=data=>{const $select=series_metabox_$(series_metabox_el.eventSeriesSelect),$selected=$select.find(":selected");if(void 0!==data.data.id&&void 0!==data.data.edit_link){if(data.data.id){const val=serializeMetaSeriesOption(composeSeriesValue(data.data));$selected.attr("value",val)}data.data.edit_link&&$selected.attr("data-edit-link",data.data.edit_link),$select.trigger("change")}},handleFetchSeriesDataFail=(jqXHR,textStatus,errorThrown)=>{if(series_metabox_ajaxTries+=1,series_metabox_ajaxTries<3)return console.error("tec_custom_tables_v1_series_data ajax request failed, retrying again.",errorThrown),void fetchSeriesData();console.error("tec_custom_tables_v1_series_data ajax request failed:",errorThrown)},getSeriesData=()=>{(()=>{const isSavingPost=state_select("core/editor").isSavingPost();return!(!flags.isSavingPost&&!isSavingPost||(!flags.isSavingPost&&isSavingPost?(flags.isSavingPost=isSavingPost,1):flags.isSavingPost&&isSavingPost||(flags.isSavingPost=isSavingPost,0)))})()&&(series_metabox_unsubscribers.getSeriesData(),series_metabox_unsubscribers.getSeriesData=null,fetchSeriesData())},onSaveClick=()=>{(()=>{const eventDatetimeBlocks=series_metabox_select("core/block-editor").getBlocks().filter((block=>"tribe/event-datetime"===block.name));return!!eventDatetimeBlocks.length&&eventDatetimeBlocks[0].attributes.rules&&"[]"!==eventDatetimeBlocks[0].attributes.rules})()&&(createNewSeriesOptionFromTitle(),(()=>{const $selected=series_metabox_$(series_metabox_el.eventSeriesSelect).find(":selected");return!!$selected.length&&("-1"!==$selected.val()&&!$selected.data("editLink"))})()&&(series_metabox_unsubscribers.getSeriesData=series_metabox_subscribe(getSeriesData)))},listenForSaveClick=()=>{series_metabox_el.saveButton&&series_metabox_el.saveButton.isConnected||(series_metabox_el.saveButton=document.querySelector(state_selectors_saveButton),series_metabox_el.saveButton&&series_metabox_el.saveButton.addEventListener("click",onSaveClick,!0))},listenForSaveDraftClick=()=>{series_metabox_el.saveDraftButton&&series_metabox_el.saveDraftButton.isConnected||(series_metabox_el.saveDraftButton=document.querySelector(state_selectors_saveDraftButton),series_metabox_el.saveDraftButton&&series_metabox_el.saveDraftButton.addEventListener("click",onSaveClick,!0))},listenForEventSeriesSelect=()=>{if(getEventSeriesSelect(),!series_metabox_el.eventSeriesSelect)return;series_metabox_unsubscribers.listenForEventSeriesSelect(),series_metabox_unsubscribers.listenForEventSeriesSelect=null;const $select=series_metabox_$(series_metabox_el.eventSeriesSelect);$select.on("change",{$target:$select},handleChange)};(()=>{series_metabox_subscribe(listenForSaveClick),series_metabox_subscribe(listenForSaveDraftClick),series_metabox_subscribe(series_metabox_onMetaBoxSave),series_metabox_unsubscribers.listenForEventSeriesSelect=series_metabox_subscribe(listenForEventSeriesSelect)})()},O7uX:function(module,exports,__webpack_require__){},OluY:function(module,exports){module.exports=tribe["events-pro"].data.status.sagas},OuoG:function(module,exports){module.exports=tribe["events-pro"].data.blocks.exception.types},PSCs:function(module,exports){module.exports=tribe["events-pro"].data.blocks},Q9xL:function(module,exports){module.exports=tribe.common.hoc},Rkpb:function(module,exports){module.exports=tribe["events-pro"].data.blocks.exception},RmXt:function(module,exports){module.exports=tribe.modules.reduxSaga.effects},SOG1:function(module,exports){module.exports=tribe.events.data.blocks.datetime.selectors},UnPw:function(module,exports){module.exports=tribe["events-pro"].data.blocks.exception.selectors},Yht6:function(module,exports){module.exports=tribe.events.data.blocks.datetime.types},cDcd:function(module,exports){module.exports=React},g8L8:function(module,exports){module.exports=tribe.common.store},gGza:function(module,exports){module.exports=tribe["events-pro"].data.blocks.recurring.constants},gSph:function(module,exports){module.exports=tribe["events-pro"].data.blocks.constants},h74D:function(module,exports){module.exports=tribe.modules.reactRedux},"iy/v":function(module,exports){module.exports=tribe["events-pro"].data.blocks.recurring.selectors},kczL:function(module,exports){module.exports=tribe.common.utils.globals},l3Sj:function(module,exports){module.exports=wp.i18n},pVH8:function(module,exports){module.exports=tribe["events-pro"].data.blocks.recurring.types},rKB8:function(module,exports){module.exports=tribe.modules.redux},rf6O:function(module,exports){module.exports=tribe.modules.propTypes},tPgE:function(module,exports){module.exports=tribe["events-pro"].data.blocks.exception.actions},tbMi:function(module,exports){module.exports=tribe.common.utils.date},wy2R:function(module,exports){module.exports=moment},zCYh:function(module,exports){module.exports=tribe.common.utils.moment}});